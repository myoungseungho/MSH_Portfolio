<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì†Œì¼“ I/O ëª¨ë¸ ë¹„êµ - MSH Portfolio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #0f0f0f;
            color: #e0e0e0;
            line-height: 1.8;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        .nav {
            margin-bottom: 40px;
        }

        .nav a {
            color: #888;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .nav a:hover {
            color: #fff;
        }

        .header {
            text-align: center;
            margin-bottom: 50px;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: #888;
            font-size: 1.1rem;
        }

        /* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
        .tabs {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 24px;
            border: 2px solid #333;
            background: transparent;
            color: #888;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            border-color: #555;
            color: #fff;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: transparent;
            color: #fff;
        }

        /* ì‹œê°í™” ì˜ì—­ */
        .visualization {
            background: #1a1a1a;
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 30px;
            min-height: 400px;
            position: relative;
        }

        .vis-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .vis-title {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .vis-controls {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: #4CAF50;
            color: white;
        }

        .btn-primary:hover {
            background: #45a049;
        }

        .btn-secondary {
            background: #333;
            color: #fff;
        }

        .btn-secondary:hover {
            background: #444;
        }

        /* ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ì‹œê°í™” */
        .vis-area {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .server-box {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 32px rgba(33, 150, 243, 0.3);
        }

        .server-box .icon {
            font-size: 2.5rem;
            margin-bottom: 8px;
        }

        .server-box .label {
            font-size: 0.85rem;
            font-weight: 600;
        }

        .connection-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0 40px;
            position: relative;
        }

        .connection-line {
            width: 100%;
            height: 4px;
            background: #333;
            border-radius: 2px;
            position: relative;
            overflow: hidden;
        }

        .connection-line::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(90deg, transparent, #667eea, transparent);
            animation: none;
        }

        .connection-line.active::after {
            animation: dataFlow 1s linear infinite;
        }

        @keyframes dataFlow {
            0% { left: -50%; }
            100% { left: 100%; }
        }

        .clients-box {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .client {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 16px;
            background: #252525;
            border-radius: 8px;
            border: 2px solid #333;
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .client.waiting {
            border-color: #555;
        }

        .client.processing {
            border-color: #FFC107;
            background: rgba(255, 193, 7, 0.1);
        }

        .client.completed {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
        }

        .client-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .client.waiting .client-icon {
            background: #555;
            color: #888;
        }

        .client.processing .client-icon {
            background: #FFC107;
            color: #000;
        }

        .client.completed .client-icon {
            background: #4CAF50;
            color: #fff;
        }

        .client-info {
            flex: 1;
        }

        .client-name {
            font-size: 0.85rem;
            font-weight: 500;
        }

        .client-status {
            font-size: 0.75rem;
            color: #888;
        }

        .client.processing .client-status {
            color: #FFC107;
        }

        .client.completed .client-status {
            color: #4CAF50;
        }

        .progress-bar {
            width: 60px;
            height: 6px;
            background: #333;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: #4CAF50;
            border-radius: 3px;
            transition: width 0.1s linear;
            width: 0%;
        }

        .client.processing .progress-bar-fill {
            background: #FFC107;
        }

        /* í†µê³„ ì˜ì—­ */
        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid #333;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #888;
            margin-top: 4px;
        }

        /* ì„¤ëª… ì˜ì—­ */
        .description {
            background: #1a1a1a;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .description h3 {
            font-size: 1.2rem;
            margin-bottom: 16px;
            color: #fff;
        }

        .description p {
            color: #aaa;
            margin-bottom: 12px;
        }

        .description code {
            background: #2a2a2a;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Consolas', monospace;
            color: #e0e0e0;
        }

        .feature-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 16px;
        }

        .feature-tag {
            padding: 6px 12px;
            background: #252525;
            border-radius: 20px;
            font-size: 0.8rem;
            color: #aaa;
        }

        .feature-tag.pro {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
        }

        .feature-tag.con {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
        }

        /* ë¹„êµ í…Œì´ë¸” */
        .comparison-section {
            background: #1a1a1a;
            border-radius: 16px;
            padding: 30px;
            margin-top: 40px;
        }

        .comparison-section h2 {
            font-size: 1.5rem;
            margin-bottom: 24px;
            text-align: center;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 16px;
            text-align: center;
            border-bottom: 1px solid #333;
        }

        .comparison-table th {
            background: #252525;
            font-weight: 600;
            color: #fff;
        }

        .comparison-table th:first-child,
        .comparison-table td:first-child {
            text-align: left;
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        .comparison-table td {
            color: #aaa;
        }

        .rating {
            display: flex;
            justify-content: center;
            gap: 2px;
        }

        .rating-star {
            color: #FFC107;
        }

        .rating-star.empty {
            color: #333;
        }

        /* ì›Œì»¤ ìŠ¤ë ˆë“œ ì‹œê°í™” (IOCPìš©) */
        .workers-area {
            display: flex;
            gap: 8px;
            margin-top: 20px;
            justify-content: center;
        }

        .worker {
            width: 50px;
            height: 50px;
            background: #252525;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
            border: 2px solid #333;
            transition: all 0.3s ease;
        }

        .worker.busy {
            border-color: #FFC107;
            background: rgba(255, 193, 7, 0.1);
            color: #FFC107;
        }

        .queue-area {
            margin-top: 20px;
            padding: 16px;
            background: #252525;
            border-radius: 8px;
        }

        .queue-label {
            font-size: 0.8rem;
            color: #888;
            margin-bottom: 8px;
        }

        .queue-items {
            display: flex;
            gap: 6px;
            min-height: 30px;
            flex-wrap: wrap;
        }

        .queue-item {
            width: 28px;
            height: 28px;
            background: #667eea;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 600;
            animation: queuePulse 0.5s ease;
        }

        @keyframes queuePulse {
            0% { transform: scale(0); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* ë¡œê·¸ ì˜ì—­ */
        .log-area {
            margin-top: 20px;
            padding: 16px;
            background: #0a0a0a;
            border-radius: 8px;
            font-family: 'Consolas', monospace;
            font-size: 0.8rem;
            max-height: 150px;
            overflow-y: auto;
        }

        .log-entry {
            padding: 4px 0;
            color: #888;
            animation: fadeIn 0.3s ease;
        }

        .log-entry .time {
            color: #555;
        }

        .log-entry.connect {
            color: #2196F3;
        }

        .log-entry.process {
            color: #FFC107;
        }

        .log-entry.complete {
            color: #4CAF50;
        }

        @keyframes fadeIn {
            0% { opacity: 0; transform: translateY(-5px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .vis-area {
                flex-direction: column;
                gap: 30px;
            }

            .connection-area {
                transform: rotate(90deg);
                width: 100px;
                padding: 20px 0;
            }

            .tabs {
                gap: 6px;
            }

            .tab-btn {
                padding: 10px 16px;
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="nav">
            <a href="../../">&larr; ëŒì•„ê°€ê¸°</a>
        </nav>

        <header class="header">
            <h1>Socket I/O ëª¨ë¸ ë¹„êµ</h1>
            <p>ë™ê¸°ë¶€í„° IOCPê¹Œì§€, ê° ë°©ì‹ì˜ ì°¨ì´ë¥¼ ì‹œê°ì ìœ¼ë¡œ ì´í•´í•˜ê¸°</p>
        </header>

        <!-- íƒ­ -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="sync">ë™ê¸° (Sync)</button>
            <button class="tab-btn" data-tab="async">ë¹„ë™ê¸° (Select)</button>
            <button class="tab-btn" data-tab="overlapped">Overlapped I/O</button>
            <button class="tab-btn" data-tab="iocp">IOCP</button>
        </div>

        <!-- ì‹œê°í™” -->
        <div class="visualization">
            <div class="vis-header">
                <div class="vis-title" id="vis-title">ë™ê¸° (Synchronous) ì„œë²„</div>
                <div class="vis-controls">
                    <button class="btn btn-secondary" id="btn-reset">ë¦¬ì…‹</button>
                    <button class="btn btn-primary" id="btn-start">ì‹œì‘</button>
                </div>
            </div>

            <div class="vis-area">
                <div class="server-box">
                    <div class="icon">ğŸ–¥ï¸</div>
                    <div class="label">Server</div>
                </div>

                <div class="connection-area">
                    <div class="connection-line" id="connection-line"></div>
                    <div class="workers-area" id="workers-area" style="display: none;">
                        <!-- IOCP ì›Œì»¤ ìŠ¤ë ˆë“œ -->
                    </div>
                    <div class="queue-area" id="queue-area" style="display: none;">
                        <div class="queue-label">Completion Queue</div>
                        <div class="queue-items" id="queue-items"></div>
                    </div>
                </div>

                <div class="clients-box" id="clients-box">
                    <!-- í´ë¼ì´ì–¸íŠ¸ë“¤ -->
                </div>
            </div>

            <div class="log-area" id="log-area">
                <div class="log-entry"><span class="time">[00:00.000]</span> ì‹œë®¬ë ˆì´ì…˜ ì¤€ë¹„ ì™„ë£Œ. ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</div>
            </div>

            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="stat-total">0</div>
                    <div class="stat-label">ì´ ì²˜ë¦¬</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="stat-time">0.0s</div>
                    <div class="stat-label">ì†Œìš” ì‹œê°„</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="stat-throughput">0.0</div>
                    <div class="stat-label">ì²˜ë¦¬ëŸ‰/ì´ˆ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="stat-avg-wait">0.0s</div>
                    <div class="stat-label">í‰ê·  ëŒ€ê¸°</div>
                </div>
            </div>
        </div>

        <!-- ì„¤ëª… -->
        <div class="description" id="description">
            <h3>ë™ê¸° (Synchronous) ë°©ì‹</h3>
            <p>
                ê°€ì¥ ê¸°ë³¸ì ì¸ ë°©ì‹ì…ë‹ˆë‹¤. ì„œë²„ê°€ í•œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ <strong>ì™„ì „íˆ ì²˜ë¦¬í•  ë•Œê¹Œì§€</strong>
                ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ëŠ” ëŒ€ê¸°í•´ì•¼ í•©ë‹ˆë‹¤.
            </p>
            <p>
                <code>recv()</code>, <code>send()</code> í˜¸ì¶œ ì‹œ ë°ì´í„°ê°€ ì˜¬ ë•Œê¹Œì§€ <strong>ë¸”ë¡œí‚¹(blocking)</strong>ë©ë‹ˆë‹¤.
            </p>
            <div class="feature-list">
                <span class="feature-tag pro">êµ¬í˜„ ê°„ë‹¨</span>
                <span class="feature-tag pro">ë””ë²„ê¹… ì‰¬ì›€</span>
                <span class="feature-tag con">í™•ì¥ì„± ì—†ìŒ</span>
                <span class="feature-tag con">ë™ì‹œ ì²˜ë¦¬ ë¶ˆê°€</span>
            </div>
        </div>

        <!-- ë¹„êµ í…Œì´ë¸” -->
        <div class="comparison-section">
            <h2>4ê°€ì§€ ëª¨ë¸ ë¹„êµ</h2>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>íŠ¹ì„±</th>
                        <th>ë™ê¸°</th>
                        <th>ë¹„ë™ê¸° (Select)</th>
                        <th>Overlapped</th>
                        <th>IOCP</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ë™ì‹œ ì²˜ë¦¬</td>
                        <td><div class="rating"><span class="rating-star">â˜…</span><span class="rating-star empty">â˜…</span><span class="rating-star empty">â˜…</span><span class="rating-star empty">â˜…</span><span class="rating-star empty">â˜…</span></div></td>
                        <td><div class="rating"><span class="rating-star">â˜…</span><span class="rating-star">â˜…</span><span class="rating-star">â˜…</span><span class="rating-star empty">â˜…</span><span class="rating-star empty">â˜…</span></div></td>
                        <td><div class="rating"><span class="rating-star">â˜…</span><span class="rating-star">â˜…</span><span class="rating-star">â˜…</span><span class="rating-star">â˜…</span><span class="rating-star empty">â˜…</span></div></td>
                        <td><div class="rating"><span class="rating-star">â˜…</span><span class="rating-star">â˜…</span><span class="rating-star">â˜…</span><span class="rating-star">â˜…</span><span class="rating-star">â˜…</span></div></td>
                    </tr>
                    <tr>
                        <td>êµ¬í˜„ ë‚œì´ë„</td>
                        <td>ì‰¬ì›€</td>
                        <td>ë³´í†µ</td>
                        <td>ì–´ë ¤ì›€</td>
                        <td>ì–´ë ¤ì›€</td>
                    </tr>
                    <tr>
                        <td>CPU íš¨ìœ¨</td>
                        <td>ë‚®ìŒ</td>
                        <td>ë³´í†µ</td>
                        <td>ë†’ìŒ</td>
                        <td>ìµœìƒ</td>
                    </tr>
                    <tr>
                        <td>í™•ì¥ì„±</td>
                        <td>~10</td>
                        <td>~1,000</td>
                        <td>~10,000</td>
                        <td>~100,000+</td>
                    </tr>
                    <tr>
                        <td>ì í•©í•œ ìš©ë„</td>
                        <td>í…ŒìŠ¤íŠ¸/í•™ìŠµ</td>
                        <td>ì†Œê·œëª¨ ì„œë²„</td>
                        <td>ì¤‘ê·œëª¨ ì„œë²„</td>
                        <td>ëŒ€ê·œëª¨ ê²Œì„ì„œë²„</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // ì„¤ì •
        const CONFIG = {
            sync: {
                title: 'ë™ê¸° (Synchronous) ì„œë²„',
                clientCount: 5,
                processTime: 1000,
                description: `
                    <h3>ë™ê¸° (Synchronous) ë°©ì‹</h3>
                    <p>ê°€ì¥ ê¸°ë³¸ì ì¸ ë°©ì‹ì…ë‹ˆë‹¤. ì„œë²„ê°€ í•œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ <strong>ì™„ì „íˆ ì²˜ë¦¬í•  ë•Œê¹Œì§€</strong> ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ëŠ” ëŒ€ê¸°í•´ì•¼ í•©ë‹ˆë‹¤.</p>
                    <p><code>recv()</code>, <code>send()</code> í˜¸ì¶œ ì‹œ ë°ì´í„°ê°€ ì˜¬ ë•Œê¹Œì§€ <strong>ë¸”ë¡œí‚¹(blocking)</strong>ë©ë‹ˆë‹¤.</p>
                    <img src="sync.gif" alt="ë™ê¸° ë°©ì‹ ë°ëª¨" style="width:100%; border-radius:8px; margin:16px 0;">
                    <div class="feature-list">
                        <span class="feature-tag pro">êµ¬í˜„ ê°„ë‹¨</span>
                        <span class="feature-tag pro">ë””ë²„ê¹… ì‰¬ì›€</span>
                        <span class="feature-tag con">í™•ì¥ì„± ì—†ìŒ</span>
                        <span class="feature-tag con">ë™ì‹œ ì²˜ë¦¬ ë¶ˆê°€</span>
                    </div>
                `
            },
            async: {
                title: 'ë¹„ë™ê¸° (Select) ì„œë²„',
                clientCount: 5,
                processTime: 800,
                description: `
                    <h3>ë¹„ë™ê¸° (Select) ë°©ì‹</h3>
                    <p><code>select()</code> í•¨ìˆ˜ë¡œ ì—¬ëŸ¬ ì†Œì¼“ì„ <strong>ë™ì‹œì— ëª¨ë‹ˆí„°ë§</strong>í•©ë‹ˆë‹¤. ë°ì´í„°ê°€ ì¤€ë¹„ëœ ì†Œì¼“ë§Œ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>
                    <p>ë¸”ë¡œí‚¹ë˜ì§€ ì•Šì§€ë§Œ, <strong>ë§¤ë²ˆ ëª¨ë“  ì†Œì¼“ì„ ê²€ì‚¬</strong>í•´ì•¼ í•˜ëŠ” ì˜¤ë²„í—¤ë“œê°€ ìˆìŠµë‹ˆë‹¤.</p>
                    <img src="select.gif" alt="Select ë°©ì‹ ë°ëª¨" style="width:100%; border-radius:8px; margin:16px 0;">
                    <div class="feature-list">
                        <span class="feature-tag pro">ë™ì‹œ ì²˜ë¦¬ ê°€ëŠ¥</span>
                        <span class="feature-tag pro">ë‹¨ì¼ ìŠ¤ë ˆë“œ</span>
                        <span class="feature-tag con">ì†Œì¼“ ìˆ˜ ì œí•œ</span>
                        <span class="feature-tag con">í´ë§ ì˜¤ë²„í—¤ë“œ</span>
                    </div>
                `
            },
            overlapped: {
                title: 'Overlapped I/O ì„œë²„',
                clientCount: 5,
                processTime: 600,
                description: `
                    <h3>Overlapped I/O ë°©ì‹</h3>
                    <p>I/O ì‘ì—…ì„ <strong>OSì—ê²Œ ë§¡ê¸°ê³ </strong> ë°”ë¡œ ë¦¬í„´í•©ë‹ˆë‹¤. ì™„ë£Œë˜ë©´ ì´ë²¤íŠ¸ë‚˜ ì½œë°±ìœ¼ë¡œ ì•Œë¦¼ë°›ìŠµë‹ˆë‹¤.</p>
                    <p><code>WSARecv()</code>ì— <code>OVERLAPPED</code> êµ¬ì¡°ì²´ë¥¼ ì „ë‹¬í•˜ë©´ <strong>ë¹„ë™ê¸°ë¡œ ë™ì‘</strong>í•©ë‹ˆë‹¤.</p>
                    <img src="overlapped.gif" alt="Overlapped I/O ë°©ì‹ ë°ëª¨" style="width:100%; border-radius:8px; margin:16px 0;">
                    <div class="feature-list">
                        <span class="feature-tag pro">ì§„ì •í•œ ë¹„ë™ê¸°</span>
                        <span class="feature-tag pro">ë†’ì€ íš¨ìœ¨</span>
                        <span class="feature-tag con">êµ¬í˜„ ë³µì¡</span>
                        <span class="feature-tag con">ì™„ë£Œ ê´€ë¦¬ í•„ìš”</span>
                    </div>
                `
            },
            iocp: {
                title: 'IOCP ì„œë²„',
                clientCount: 5,
                processTime: 400,
                workerCount: 4,
                description: `
                    <h3>IOCP (I/O Completion Port) ë°©ì‹</h3>
                    <p>ì™„ë£Œëœ I/Oë¥¼ <strong>í(Queue)ì— ëª¨ì•„ì„œ</strong> Worker Threadë“¤ì´ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>
                    <p>Windowsì—ì„œ <strong>ìµœê³  ì„±ëŠ¥</strong>ì˜ ë„¤íŠ¸ì›Œí¬ ëª¨ë¸ì…ë‹ˆë‹¤. ëŒ€ê·œëª¨ ê²Œì„ì„œë²„ì˜ í‘œì¤€!</p>
                    <img src="iocp.gif" alt="IOCP ë°©ì‹ ë°ëª¨" style="width:100%; border-radius:8px; margin:16px 0;">
                    <div class="feature-list">
                        <span class="feature-tag pro">ìµœê³  ì„±ëŠ¥</span>
                        <span class="feature-tag pro">í™•ì¥ì„± ìµœìƒ</span>
                        <span class="feature-tag pro">íš¨ìœ¨ì  ìŠ¤ë ˆë“œ ê´€ë¦¬</span>
                        <span class="feature-tag con">Windows ì „ìš©</span>
                    </div>
                `
            }
        };

        // ìƒíƒœ
        let currentTab = 'sync';
        let isRunning = false;
        let startTime = 0;
        let clients = [];
        let completedCount = 0;
        let totalWaitTime = 0;
        let timerInterval = null;
        let queue = [];
        let workers = [];

        // DOM ìš”ì†Œ
        const tabBtns = document.querySelectorAll('.tab-btn');
        const visTitle = document.getElementById('vis-title');
        const clientsBox = document.getElementById('clients-box');
        const logArea = document.getElementById('log-area');
        const btnStart = document.getElementById('btn-start');
        const btnReset = document.getElementById('btn-reset');
        const connectionLine = document.getElementById('connection-line');
        const workersArea = document.getElementById('workers-area');
        const queueArea = document.getElementById('queue-area');
        const queueItems = document.getElementById('queue-items');
        const description = document.getElementById('description');

        // íƒ­ ì „í™˜
        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                if (isRunning) return;

                tabBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentTab = btn.dataset.tab;

                visTitle.textContent = CONFIG[currentTab].title;
                description.innerHTML = CONFIG[currentTab].description;

                // IOCPì¼ ë•Œë§Œ ì›Œì»¤/í í‘œì‹œ
                if (currentTab === 'iocp') {
                    workersArea.style.display = 'flex';
                    queueArea.style.display = 'block';
                    initWorkers();
                } else {
                    workersArea.style.display = 'none';
                    queueArea.style.display = 'none';
                }

                resetSimulation();
            });
        });

        // ì›Œì»¤ ì´ˆê¸°í™” (IOCP)
        function initWorkers() {
            workersArea.innerHTML = '';
            workers = [];
            for (let i = 0; i < CONFIG.iocp.workerCount; i++) {
                const worker = document.createElement('div');
                worker.className = 'worker';
                worker.textContent = `W${i + 1}`;
                worker.dataset.index = i;
                workersArea.appendChild(worker);
                workers.push({ element: worker, busy: false, clientId: null });
            }
        }

        // í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
        function initClients() {
            clientsBox.innerHTML = '';
            clients = [];
            const count = CONFIG[currentTab].clientCount;

            for (let i = 0; i < count; i++) {
                const client = document.createElement('div');
                client.className = 'client waiting';
                client.innerHTML = `
                    <div class="client-icon">${i + 1}</div>
                    <div class="client-info">
                        <div class="client-name">Client ${i + 1}</div>
                        <div class="client-status">ëŒ€ê¸°ì¤‘</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-bar-fill"></div>
                    </div>
                `;
                clientsBox.appendChild(client);
                clients.push({
                    element: client,
                    status: 'waiting',
                    progress: 0,
                    connectTime: 0,
                    startProcessTime: 0
                });
            }
        }

        // ë¡œê·¸ ì¶”ê°€
        function addLog(message, type = '') {
            const elapsed = ((Date.now() - startTime) / 1000).toFixed(3);
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.innerHTML = `<span class="time">[${elapsed.padStart(8, '0')}]</span> ${message}`;
            logArea.appendChild(entry);
            logArea.scrollTop = logArea.scrollHeight;
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            const elapsed = (Date.now() - startTime) / 1000;
            document.getElementById('stat-total').textContent = completedCount;
            document.getElementById('stat-time').textContent = elapsed.toFixed(1) + 's';
            document.getElementById('stat-throughput').textContent =
                elapsed > 0 ? (completedCount / elapsed).toFixed(2) : '0.0';
            document.getElementById('stat-avg-wait').textContent =
                completedCount > 0 ? (totalWaitTime / completedCount / 1000).toFixed(2) + 's' : '0.0s';
        }

        // í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateClientStatus(index, status, statusText) {
            const client = clients[index];
            client.element.className = `client ${status}`;
            client.element.querySelector('.client-status').textContent = statusText;
            client.status = status;
        }

        // í”„ë¡œê·¸ë ˆìŠ¤ ì—…ë°ì´íŠ¸
        function updateProgress(index, progress) {
            const client = clients[index];
            client.progress = progress;
            client.element.querySelector('.progress-bar-fill').style.width = `${progress}%`;
        }

        // ë™ê¸° ë°©ì‹ ì‹œë®¬ë ˆì´ì…˜
        async function runSync() {
            const processTime = CONFIG.sync.processTime;

            for (let i = 0; i < clients.length; i++) {
                if (!isRunning) break;

                clients[i].connectTime = Date.now();
                addLog(`Client ${i + 1} ì ‘ì†`, 'connect');

                // ì´ì „ í´ë¼ì´ì–¸íŠ¸ë“¤ì´ ì²˜ë¦¬ë  ë•Œê¹Œì§€ ëŒ€ê¸°
                clients[i].startProcessTime = Date.now();
                const waitTime = clients[i].startProcessTime - clients[i].connectTime;
                totalWaitTime += waitTime;

                updateClientStatus(i, 'processing', 'ì²˜ë¦¬ì¤‘...');
                addLog(`Client ${i + 1} ì²˜ë¦¬ ì‹œì‘`, 'process');
                connectionLine.classList.add('active');

                // ì²˜ë¦¬ ì‹œë®¬ë ˆì´ì…˜
                for (let p = 0; p <= 100; p += 5) {
                    if (!isRunning) break;
                    updateProgress(i, p);
                    await sleep(processTime / 20);
                }

                if (!isRunning) break;

                updateClientStatus(i, 'completed', 'ì™„ë£Œ');
                addLog(`Client ${i + 1} ì²˜ë¦¬ ì™„ë£Œ`, 'complete');
                completedCount++;
                connectionLine.classList.remove('active');

                updateStats();
            }
        }

        // ë¹„ë™ê¸° (Select) ë°©ì‹ ì‹œë®¬ë ˆì´ì…˜
        async function runAsync() {
            const processTime = CONFIG.async.processTime;

            // ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ ë™ì‹œ ì ‘ì†
            for (let i = 0; i < clients.length; i++) {
                clients[i].connectTime = Date.now();
                addLog(`Client ${i + 1} ì ‘ì†`, 'connect');
            }

            connectionLine.classList.add('active');

            // ë¼ìš´ë“œ ë¡œë¹ˆ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬ (select ì‹œë®¬ë ˆì´ì…˜)
            let allDone = false;
            while (!allDone && isRunning) {
                allDone = true;

                for (let i = 0; i < clients.length; i++) {
                    if (!isRunning) break;
                    if (clients[i].status === 'completed') continue;

                    allDone = false;

                    if (clients[i].status === 'waiting') {
                        clients[i].startProcessTime = Date.now();
                        totalWaitTime += clients[i].startProcessTime - clients[i].connectTime;
                        updateClientStatus(i, 'processing', 'ì²˜ë¦¬ì¤‘...');
                        addLog(`Client ${i + 1} ì²˜ë¦¬ ì‹œì‘ (select)`, 'process');
                    }

                    // ì¡°ê¸ˆì”© ì§„í–‰
                    clients[i].progress += 10;
                    updateProgress(i, Math.min(clients[i].progress, 100));

                    if (clients[i].progress >= 100) {
                        updateClientStatus(i, 'completed', 'ì™„ë£Œ');
                        addLog(`Client ${i + 1} ì²˜ë¦¬ ì™„ë£Œ`, 'complete');
                        completedCount++;
                        updateStats();
                    }
                }

                await sleep(processTime / 10);
            }

            connectionLine.classList.remove('active');
        }

        // Overlapped I/O ë°©ì‹ ì‹œë®¬ë ˆì´ì…˜
        async function runOverlapped() {
            const processTime = CONFIG.overlapped.processTime;

            // ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ ë™ì‹œ ì ‘ì† ë° I/O ìš”ì²­
            for (let i = 0; i < clients.length; i++) {
                clients[i].connectTime = Date.now();
                clients[i].startProcessTime = Date.now();
                addLog(`Client ${i + 1} ì ‘ì† + Overlapped ìš”ì²­`, 'connect');
                updateClientStatus(i, 'processing', 'I/O ì§„í–‰ì¤‘...');
            }

            connectionLine.classList.add('active');

            // ë³‘ë ¬ ì²˜ë¦¬ ì‹œë®¬ë ˆì´ì…˜
            const promises = clients.map(async (client, i) => {
                for (let p = 0; p <= 100; p += 5) {
                    if (!isRunning) return;
                    updateProgress(i, p);
                    await sleep(processTime / 20 + Math.random() * 50);
                }

                if (!isRunning) return;

                totalWaitTime += Date.now() - client.startProcessTime;
                updateClientStatus(i, 'completed', 'ì™„ë£Œ');
                addLog(`Client ${i + 1} I/O ì™„ë£Œ`, 'complete');
                completedCount++;
                updateStats();
            });

            await Promise.all(promises);
            connectionLine.classList.remove('active');
        }

        // IOCP ë°©ì‹ ì‹œë®¬ë ˆì´ì…˜
        async function runIOCP() {
            const processTime = CONFIG.iocp.processTime;
            queue = [];

            // ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ ì ‘ì† ë° íì— ì¶”ê°€
            for (let i = 0; i < clients.length; i++) {
                clients[i].connectTime = Date.now();
                addLog(`Client ${i + 1} ì ‘ì† â†’ Completion Queueì— ë“±ë¡`, 'connect');

                // íì— ì¶”ê°€ (ì‹œê°í™”)
                const queueItem = document.createElement('div');
                queueItem.className = 'queue-item';
                queueItem.textContent = i + 1;
                queueItem.dataset.clientId = i;
                queueItems.appendChild(queueItem);
                queue.push({ clientId: i, element: queueItem });

                await sleep(50);
            }

            connectionLine.classList.add('active');

            // Worker ìŠ¤ë ˆë“œë“¤ì´ íì—ì„œ ì‘ì—…ì„ ê°€ì ¸ê°€ì„œ ì²˜ë¦¬
            async function workerProcess(workerIndex) {
                while (queue.length > 0 && isRunning) {
                    const task = queue.shift();
                    if (!task) break;

                    const clientId = task.clientId;
                    task.element.remove();

                    // ì›Œì»¤ ìƒíƒœ ì—…ë°ì´íŠ¸
                    workers[workerIndex].busy = true;
                    workers[workerIndex].clientId = clientId;
                    workers[workerIndex].element.classList.add('busy');
                    workers[workerIndex].element.textContent = `C${clientId + 1}`;

                    clients[clientId].startProcessTime = Date.now();
                    totalWaitTime += clients[clientId].startProcessTime - clients[clientId].connectTime;
                    updateClientStatus(clientId, 'processing', `Worker ${workerIndex + 1}`);
                    addLog(`Worker ${workerIndex + 1}: Client ${clientId + 1} ì²˜ë¦¬ ì‹œì‘`, 'process');

                    // ì²˜ë¦¬
                    for (let p = 0; p <= 100; p += 10) {
                        if (!isRunning) return;
                        updateProgress(clientId, p);
                        await sleep(processTime / 10);
                    }

                    if (!isRunning) return;

                    updateClientStatus(clientId, 'completed', 'ì™„ë£Œ');
                    addLog(`Worker ${workerIndex + 1}: Client ${clientId + 1} ì™„ë£Œ`, 'complete');
                    completedCount++;
                    updateStats();

                    // ì›Œì»¤ ìƒíƒœ ë¦¬ì…‹
                    workers[workerIndex].busy = false;
                    workers[workerIndex].clientId = null;
                    workers[workerIndex].element.classList.remove('busy');
                    workers[workerIndex].element.textContent = `W${workerIndex + 1}`;
                }
            }

            // ëª¨ë“  ì›Œì»¤ ë™ì‹œ ì‹¤í–‰
            await Promise.all(workers.map((_, i) => workerProcess(i)));
            connectionLine.classList.remove('active');
        }

        // ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘
        async function startSimulation() {
            if (isRunning) return;

            isRunning = true;
            btnStart.textContent = 'ì‹¤í–‰ì¤‘...';
            btnStart.disabled = true;
            startTime = Date.now();
            completedCount = 0;
            totalWaitTime = 0;

            logArea.innerHTML = '';
            addLog('ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘', '');

            initClients();
            if (currentTab === 'iocp') {
                initWorkers();
                queueItems.innerHTML = '';
            }

            timerInterval = setInterval(updateStats, 100);

            switch (currentTab) {
                case 'sync':
                    await runSync();
                    break;
                case 'async':
                    await runAsync();
                    break;
                case 'overlapped':
                    await runOverlapped();
                    break;
                case 'iocp':
                    await runIOCP();
                    break;
            }

            clearInterval(timerInterval);
            isRunning = false;
            btnStart.textContent = 'ì‹œì‘';
            btnStart.disabled = false;

            if (completedCount === clients.length) {
                addLog('ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ ì²˜ë¦¬ ì™„ë£Œ!', 'complete');
            }
            updateStats();
        }

        // ë¦¬ì…‹
        function resetSimulation() {
            isRunning = false;
            clearInterval(timerInterval);

            btnStart.textContent = 'ì‹œì‘';
            btnStart.disabled = false;
            connectionLine.classList.remove('active');

            completedCount = 0;
            totalWaitTime = 0;
            queue = [];

            document.getElementById('stat-total').textContent = '0';
            document.getElementById('stat-time').textContent = '0.0s';
            document.getElementById('stat-throughput').textContent = '0.0';
            document.getElementById('stat-avg-wait').textContent = '0.0s';

            logArea.innerHTML = '<div class="log-entry"><span class="time">[00:00.000]</span> ì‹œë®¬ë ˆì´ì…˜ ì¤€ë¹„ ì™„ë£Œ. ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</div>';

            initClients();
            if (currentTab === 'iocp') {
                initWorkers();
                queueItems.innerHTML = '';
            }
        }

        // ìœ í‹¸ë¦¬í‹°
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        btnStart.addEventListener('click', startSimulation);
        btnReset.addEventListener('click', resetSimulation);

        // ì´ˆê¸°í™”
        initClients();
    </script>
</body>
</html>
