<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toon Shading (툰 쉐이딩) - MSH Portfolio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #fafafa;
            color: #333;
            line-height: 1.8;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        .nav {
            margin-bottom: 40px;
        }

        .nav a {
            color: #666;
            text-decoration: none;
            font-size: 0.9rem;
            margin-right: 12px;
        }

        .nav a:hover {
            color: #333;
        }

        .header {
            margin-bottom: 50px;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: #111;
        }

        .header-meta {
            display: flex;
            gap: 20px;
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        .header-meta span {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .tag {
            background: #FF9800;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
        }

        .section {
            margin-bottom: 50px;
        }

        .section h2 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #111;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }

        .section h3 {
            font-size: 1.2rem;
            font-weight: 600;
            margin: 30px 0 15px 0;
            color: #333;
        }

        .section p {
            margin-bottom: 16px;
            color: #444;
        }

        .section ul {
            margin-left: 20px;
            margin-bottom: 16px;
        }

        .section li {
            margin-bottom: 8px;
            color: #444;
        }

        pre {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        code {
            background: #f0f0f0;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            color: #FF9800;
        }

        pre code {
            background: none;
            padding: 0;
            color: #d4d4d4;
        }

        .img-container {
            margin: 30px 0;
            text-align: center;
        }

        .img-container img {
            max-width: 100%;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .img-caption {
            margin-top: 12px;
            font-size: 0.85rem;
            color: #666;
        }

        .highlight-box {
            background: #fff8e1;
            border-left: 4px solid #FF9800;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .highlight-box h4 {
            color: #FF9800;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        .formula-box {
            background: white;
            border: 2px solid #FF9800;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            text-align: center;
        }

        .formula {
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 1.2rem;
            color: #FF9800;
            margin: 10px 0;
        }

        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }

        .param-table th,
        .param-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
        }

        .param-table th {
            background: #FF9800;
            color: white;
            font-weight: 600;
        }

        .param-table tr:last-child td {
            border-bottom: none;
        }

        .comparison-box {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .comparison-item {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #e0e0e0;
        }

        .comparison-item h4 {
            margin-bottom: 10px;
            color: #333;
        }

        .footer-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 60px;
            padding-top: 24px;
            border-top: 1px solid #e0e0e0;
        }

        .footer-nav a {
            color: #FF9800;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .footer-nav a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="nav">
            <a href="../../">← 메인</a>
            <a href="../">← 쉐이더 테크닉 목록</a>
        </nav>

        <header class="header">
            <h1>02. Toon Shading (툰 쉐이딩)</h1>
            <div class="header-meta">
                <span>작성일: 2026-01-12</span>
                <span>구현 완료</span>
                <span>난이도: ★☆☆</span>
            </div>
            <div class="tags">
                <span class="tag">DirectX 11</span>
                <span class="tag">HLSL</span>
                <span class="tag">Lambert</span>
                <span class="tag">step()</span>
                <span class="tag">smoothstep()</span>
            </div>
        </header>

        <!-- 미리보기 이미지 -->
        <div class="img-container">
            <img src="../../../Screenshots/Toon/step5.gif" alt="Toon Shading 최종 결과" onerror="this.style.display='none'">
            <p class="img-caption">Toon Shading - 만화처럼 단계별로 끊기는 음영</p>
        </div>

        <!-- 개요 -->
        <section class="section">
            <h2>이런 효과 본 적 있나요?</h2>
            <p>
                <strong>젤다: 브레스 오브 더 와일드</strong>, <strong>원신</strong>, <strong>드래곤볼 파이터즈</strong> 같은 게임들.
                이런 게임의 캐릭터들은 실사 3D 게임과 뭔가 달라 보이죠?
            </p>
            <p>
                <strong>실사풍</strong>: 밝은 곳 → 어두운 곳이 부드럽게 이어짐 (그라디언트)<br>
                <strong>만화풍</strong>: 밝은 곳 / 어두운 곳이 딱딱 끊어짐 (단계가 있음)
            </p>
            <p>
                이 "딱딱 끊기는 음영"을 어떻게 만들까요? 정답은 <strong>Toon Shading</strong>입니다.
            </p>

            <div class="highlight-box">
                <h4>Toon Shading이란?</h4>
                <p>
                    실사 조명의 부드러운 그라디언트를 <strong>2~3단계로 끊어서</strong> 만화/애니메이션처럼 보이게 하는 기법입니다.
                    "셀 쉐이딩(Cel Shading)"이라고도 불려요.
                </p>
            </div>
        </section>

        <!-- 원리 -->
        <section class="section">
            <h2>원리: 어떻게 음영을 끊을까?</h2>

            <h3>1단계: 빛을 받는 정도 계산하기</h3>
            <p>
                먼저 "이 픽셀이 빛을 얼마나 받는지"를 숫자로 알아야 해요.
            </p>
            <p>
                Fresnel에서는 <code>dot(N, V)</code>로 "시선 방향"을 봤다면,<br>
                Toon Shading에서는 <code>dot(N, L)</code>로 "빛 방향"을 봐요.
            </p>
            <ul>
                <li><strong>N</strong>: 표면이 향하는 방향 (노말)</li>
                <li><strong>L</strong>: 빛이 오는 방향 (Light)</li>
            </ul>
            <p>결과:</p>
            <ul>
                <li>빛을 정면으로 받으면 → <strong>1</strong> (밝음)</li>
                <li>빛을 못 받으면 → <strong>0</strong> (어두움)</li>
                <li>비스듬히 받으면 → <strong>0.5</strong> 같은 중간값</li>
            </ul>
            <p>이게 바로 <strong>Lambert 조명</strong>이라는 기본 공식이에요.</p>

            <h3>2단계: 값을 단계로 끊기</h3>
            <p>
                실사는 0~1 값을 그대로 써서 부드러운 그라디언트가 나와요.<br>
                만화처럼 만들려면 이 값을 <strong>몇 단계로 끊어버리면</strong> 돼요.
            </p>

            <div class="comparison-box">
                <div class="comparison-item">
                    <h4>실사 (Lambert)</h4>
                    <pre><code>0, 0.2, 0.4, 0.6, 0.8, 1.0
(부드럽게 변함)</code></pre>
                </div>
                <div class="comparison-item">
                    <h4>만화 (Toon)</h4>
                    <pre><code>0, 0, 0, 1, 1, 1
(0.5 기준으로 끊음)</code></pre>
                </div>
            </div>

            <h3>3단계: step() 함수 사용</h3>
            <p><code>step(기준값, 입력값)</code> 함수가 이 역할을 해요:</p>
            <ul>
                <li>입력값이 기준값보다 <strong>작으면</strong> → 0</li>
                <li>입력값이 기준값보다 <strong>크면</strong> → 1</li>
            </ul>
            <pre><code>step(0.5, 0.3) → 0  (0.3 < 0.5 이니까)
step(0.5, 0.7) → 1  (0.7 > 0.5 이니까)</code></pre>

            <h3>4단계: smoothstep()으로 경계 부드럽게 (선택)</h3>
            <p>
                <code>step()</code>은 경계가 너무 날카로워요.<br>
                <code>smoothstep(시작, 끝, 입력값)</code>을 쓰면 경계만 살짝 부드럽게 할 수 있어요.
            </p>
            <pre><code>step(0.5, x):       0 0 0 0 0 | 1 1 1 1 1  (딱 끊김)
smoothstep(0.4, 0.6, x):  0 0 0 0 ~ 1 1 1 1 1  (경계만 부드럽게)</code></pre>

            <h3>최종 공식</h3>
            <div class="formula-box">
                <p><strong>2단계 Toon Shading</strong></p>
                <div class="formula">
                    toon = step(threshold, dot(N, L))
                </div>
            </div>
            <div class="highlight-box">
                <h4>정리</h4>
                <ul>
                    <li><strong>dot(N, L)</strong>: 빛을 얼마나 받는지 (0~1)</li>
                    <li><strong>step()</strong>: 기준점에서 딱 끊기 (날카로운 경계)</li>
                    <li><strong>smoothstep()</strong>: 구간에서 부드럽게 끊기 (부드러운 경계)</li>
                </ul>
            </div>
        </section>

        <!-- 단계별 구현 과정 -->
        <section class="section">
            <h2>단계별 구현 과정</h2>

            <h3>Step 1: Lambert 조명 (비교 기준)</h3>
            <div class="img-container">
                <img src="../../../Screenshots/Toon/step1.gif" alt="Step 1: Lambert" onerror="this.style.display='none'">
                <p class="img-caption">Step 1: 실사 조명 - 부드러운 그라디언트 (이걸 만화처럼 바꿀 거예요)</p>
            </div>
            <p><strong>목적</strong>: "원래 조명은 이렇게 부드럽다"는 걸 보여주는 비교 기준</p>
            <pre><code>float NdotL = saturate(dot(N, L));
return float4(NdotL, NdotL, NdotL, 1.0f);  // 그대로 출력</code></pre>

            <h3>Step 2: step()으로 2단계 끊기</h3>
            <div class="img-container">
                <img src="../../../Screenshots/Toon/step2.gif" alt="Step 2: step()" onerror="this.style.display='none'">
                <p class="img-caption">Step 2: step() 적용 - 딱 2단계로 끊김! (threshold 조절)</p>
            </div>
            <p><strong>목적</strong>: 날카로운 2단계 음영</p>
            <pre><code>float NdotL = saturate(dot(N, L));
float toon = step(Threshold, NdotL);  // 0.5 기준으로 끊기
return float4(toon, toon, toon, 1.0f);</code></pre>

            <h3>Step 3: smoothstep()으로 부드러운 경계</h3>
            <div class="img-container">
                <img src="../../../Screenshots/Toon/step3.gif" alt="Step 3: smoothstep()" onerror="this.style.display='none'">
                <p class="img-caption">Step 3: smoothstep() - 경계만 살짝 부드럽게</p>
            </div>
            <p><strong>목적</strong>: 경계 부분만 부드럽게</p>
            <pre><code>float NdotL = saturate(dot(N, L));
float toon = smoothstep(EdgeStart, EdgeEnd, NdotL);  // 0.4~0.6 구간
return float4(toon, toon, toon, 1.0f);</code></pre>

            <h3>Step 4: 3단계 음영</h3>
            <div class="img-container">
                <img src="../../../Screenshots/Toon/step4.gif" alt="Step 4: 3단계" onerror="this.style.display='none'">
                <p class="img-caption">Step 4: 3단계 음영 - 어두움 / 중간 / 밝음</p>
            </div>
            <p><strong>목적</strong>: 더 풍부한 음영 표현</p>
            <pre><code>float NdotL = saturate(dot(N, L));

float toon;
if (NdotL < 0.33) toon = 0.2;       // 어두움
else if (NdotL < 0.66) toon = 0.5;  // 중간
else toon = 1.0;                     // 밝음</code></pre>

            <h3>Step 5: 최종 색상 적용</h3>
            <div class="img-container">
                <img src="../../../Screenshots/Toon/step5.gif" alt="Step 5: 최종" onerror="this.style.display='none'">
                <p class="img-caption">Step 5: 색상 적용 - 만화 캐릭터처럼!</p>
            </div>
            <p><strong>목적</strong>: 예쁜 색상으로 완성</p>
            <pre><code>float NdotL = saturate(dot(N, L));

float4 finalColor;
if (NdotL < Threshold1) finalColor = ShadowColor;    // 그림자
else if (NdotL < Threshold2) finalColor = MidColor;  // 중간
else finalColor = BaseColor;                          // 밝은 부분

return finalColor;</code></pre>

            <div class="highlight-box">
                <h4>단계별 요약</h4>
                <ul>
                    <li><strong>Step 1</strong>: Lambert (실사 조명) - 비교 기준</li>
                    <li><strong>Step 2</strong>: step() - 날카로운 2단계</li>
                    <li><strong>Step 3</strong>: smoothstep() - 부드러운 경계</li>
                    <li><strong>Step 4</strong>: 3단계 음영 - 더 풍부한 표현</li>
                    <li><strong>Step 5</strong>: 색상 적용 - 완성!</li>
                </ul>
            </div>
        </section>

        <!-- 파라미터 -->
        <section class="section">
            <h2>파라미터 조정</h2>

            <table class="param-table">
                <thead>
                    <tr>
                        <th>파라미터</th>
                        <th>설명</th>
                        <th>권장 범위</th>
                        <th>효과</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Threshold</strong></td>
                        <td>밝음/어두움 경계점</td>
                        <td>0.3 ~ 0.7</td>
                        <td>낮으면 밝은 영역 넓어짐</td>
                    </tr>
                    <tr>
                        <td><strong>EdgeStart/End</strong></td>
                        <td>smoothstep 구간</td>
                        <td>0.1 차이</td>
                        <td>차이 클수록 부드러움</td>
                    </tr>
                    <tr>
                        <td><strong>LightDir</strong></td>
                        <td>빛 방향</td>
                        <td>정규화된 벡터</td>
                        <td>그림자 위치 결정</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- 학습 포인트 -->
        <section class="section">
            <h2>학습 포인트</h2>

            <div class="highlight-box">
                <h4>핵심 개념</h4>
                <ul>
                    <li><strong>Lambert 조명</strong>: dot(N, L)로 빛 받는 정도 계산</li>
                    <li><strong>step()</strong>: 기준점에서 0/1로 딱 끊기</li>
                    <li><strong>smoothstep()</strong>: 구간에서 부드럽게 0→1</li>
                    <li><strong>Directional Light</strong>: 태양처럼 한 방향으로 오는 빛</li>
                </ul>
            </div>

            <h3>Fresnel vs Toon Shading</h3>
            <table class="param-table">
                <thead>
                    <tr>
                        <th></th>
                        <th>Fresnel</th>
                        <th>Toon Shading</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>목적</strong></td>
                        <td>가장자리 빛남</td>
                        <td>만화풍 음영</td>
                    </tr>
                    <tr>
                        <td><strong>핵심 공식</strong></td>
                        <td>dot(N, V)</td>
                        <td>dot(N, L)</td>
                    </tr>
                    <tr>
                        <td><strong>비교 대상</strong></td>
                        <td>시선 (View)</td>
                        <td>빛 (Light)</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- 실전 활용 -->
        <section class="section">
            <h2>실전 활용 예시</h2>

            <h3>게임에서의 사용</h3>
            <ul>
                <li><strong>셀 쉐이딩 캐릭터</strong>: 젤다, 원신, 드래곤볼 파이터즈</li>
                <li><strong>카툰 렌더링</strong>: 만화/애니메이션 스타일 게임</li>
                <li><strong>스타일라이즈드 그래픽</strong>: 독특한 아트 스타일</li>
            </ul>

            <h3>다른 기법과의 조합</h3>
            <ul>
                <li><strong>+ Outline</strong>: 외곽선 추가로 더 만화스럽게</li>
                <li><strong>+ Fresnel</strong>: 림 라이트 효과</li>
                <li><strong>+ Specular</strong>: 하이라이트 추가</li>
            </ul>
        </section>

        <footer class="footer-nav">
            <a href="../01-fresnel/">← 01. Fresnel</a>
            <a href="../">쉐이더 테크닉 목록 →</a>
        </footer>
    </div>
</body>
</html>
