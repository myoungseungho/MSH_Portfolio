<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dissolve (디졸브) - MSH Portfolio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #fafafa;
            color: #333;
            line-height: 1.8;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        .nav {
            margin-bottom: 40px;
        }

        .nav a {
            color: #666;
            text-decoration: none;
            font-size: 0.9rem;
            margin-right: 12px;
        }

        .nav a:hover {
            color: #333;
        }

        .header {
            margin-bottom: 50px;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: #111;
        }

        .header-meta {
            display: flex;
            gap: 20px;
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        .header-meta span {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .tag {
            background: #F44336;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
        }

        .section {
            margin-bottom: 50px;
        }

        .section h2 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #111;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }

        .section h3 {
            font-size: 1.2rem;
            font-weight: 600;
            margin: 30px 0 15px 0;
            color: #333;
        }

        .section p {
            margin-bottom: 16px;
            color: #444;
        }

        .section ul {
            margin-left: 20px;
            margin-bottom: 16px;
        }

        .section li {
            margin-bottom: 8px;
            color: #444;
        }

        pre {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        code {
            background: #f0f0f0;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            color: #F44336;
        }

        pre code {
            background: none;
            padding: 0;
            color: #d4d4d4;
        }

        .img-container {
            margin: 30px 0;
            text-align: center;
        }

        .img-container img {
            max-width: 100%;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .img-caption {
            margin-top: 12px;
            font-size: 0.85rem;
            color: #666;
        }

        .highlight-box {
            background: #ffebee;
            border-left: 4px solid #F44336;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .highlight-box h4 {
            color: #F44336;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        .formula-box {
            background: white;
            border: 2px solid #F44336;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            text-align: center;
        }

        .formula {
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 1.2rem;
            color: #F44336;
            margin: 10px 0;
        }

        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }

        .param-table th,
        .param-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
        }

        .param-table th {
            background: #F44336;
            color: white;
            font-weight: 600;
        }

        .param-table tr:last-child td {
            border-bottom: none;
        }

        .comparison-box {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .comparison-item {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #e0e0e0;
        }

        .comparison-item h4 {
            margin-bottom: 10px;
            color: #333;
        }

        .footer-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 60px;
            padding-top: 24px;
            border-top: 1px solid #e0e0e0;
        }

        .footer-nav a {
            color: #F44336;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .footer-nav a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="nav">
            <a href="../../">← 메인</a>
            <a href="../">← 쉐이더 테크닉 목록</a>
        </nav>

        <header class="header">
            <h1>03. Dissolve (디졸브)</h1>
            <div class="header-meta">
                <span>작성일: 2026-01-12</span>
                <span>구현 완료</span>
                <span>난이도: ★★☆</span>
            </div>
            <div class="tags">
                <span class="tag">DirectX 11</span>
                <span class="tag">HLSL</span>
                <span class="tag">Noise</span>
                <span class="tag">clip()</span>
                <span class="tag">Edge Glow</span>
            </div>
        </header>

        <!-- 미리보기 이미지 -->
        <div class="img-container">
            <img src="../../../Screenshots/디졸브/step4.gif" alt="Dissolve 최종 결과" onerror="this.style.display='none'">
            <p class="img-caption">Dissolve - 타노스 핑거스냅처럼 재가 되어 사라지는 효과</p>
        </div>

        <!-- 개요 -->
        <section class="section">
            <h2>이런 효과 본 적 있나요?</h2>
            <p>
                <strong>어벤져스: 인피니티 워</strong>에서 타노스가 핑거스냅하면 사람들이 재가 되어 사라지잖아요?
                게임에서도 캐릭터가 죽거나 사라질 때 <strong>불타듯이 가장자리부터 녹아내리는</strong> 연출 많이 봤을 거예요.
            </p>
            <p>
                이런 효과를 <strong>Dissolve (디졸브)</strong> 라고 해요.
            </p>

            <div class="highlight-box">
                <h4>Dissolve란?</h4>
                <p>
                    오브젝트가 <strong>노이즈 패턴에 따라 조금씩 사라지는</strong> 효과입니다.
                    단순히 투명해지는 게 아니라, 불규칙한 패턴으로 "타들어가듯" 사라져요.
                </p>
            </div>
        </section>

        <!-- 원리 -->
        <section class="section">
            <h2>원리: 어떻게 "타들어가게" 만들까?</h2>

            <h3>1단계: 노이즈 맵이 필요해</h3>
            <p>
                먼저 "어디가 먼저 사라질지" 정하는 지도가 필요해요.
                이걸 <strong>노이즈 맵</strong>이라고 해요.
            </p>
            <ul>
                <li>노이즈 값이 <strong>낮은 곳</strong> → 먼저 사라짐</li>
                <li>노이즈 값이 <strong>높은 곳</strong> → 나중에 사라짐</li>
            </ul>
            <p>
                텍스처를 쓸 수도 있지만, 우리는 <strong>수학으로 노이즈를 생성</strong>할 거예요 (Procedural Noise).
            </p>

            <h3>2단계: Threshold (진행도)</h3>
            <p>
                <code>Threshold</code>는 "지금 어디까지 사라졌나"를 나타내는 값이에요.
            </p>
            <ul>
                <li><strong>Threshold = 0</strong>: 아무것도 안 사라짐</li>
                <li><strong>Threshold = 0.5</strong>: 절반 사라짐</li>
                <li><strong>Threshold = 1</strong>: 전부 사라짐</li>
            </ul>

            <h3>3단계: clip() 함수로 픽셀 버리기</h3>
            <p>
                <code>clip(x)</code> 함수는 간단해요:
            </p>
            <ul>
                <li>x가 <strong>0보다 작으면</strong> → 이 픽셀 버림 (안 그림)</li>
                <li>x가 <strong>0 이상이면</strong> → 정상적으로 그림</li>
            </ul>
            <pre><code>clip(noise - threshold);

// noise = 0.3, threshold = 0.5 라면?
// 0.3 - 0.5 = -0.2 (음수) → 픽셀 버림!

// noise = 0.7, threshold = 0.5 라면?
// 0.7 - 0.5 = 0.2 (양수) → 픽셀 유지!</code></pre>

            <h3>4단계: 경계에 빛나는 효과 (Edge Glow)</h3>
            <p>
                그냥 사라지면 심심하잖아요? 사라지는 <strong>경계 부분에 불타는 효과</strong>를 넣어요.
            </p>
            <ul>
                <li>"거의 사라질 것 같은" 픽셀 → 주황/빨강색으로 빛나게</li>
                <li>경계에서 안쪽으로 갈수록 원래 색상으로</li>
            </ul>

            <h3>최종 공식</h3>
            <div class="formula-box">
                <p><strong>Dissolve 핵심</strong></p>
                <div class="formula">
                    clip(noise - threshold)
                </div>
                <p>노이즈 값이 threshold보다 작으면 픽셀이 사라진다!</p>
            </div>
            <div class="highlight-box">
                <h4>정리</h4>
                <ul>
                    <li><strong>Noise</strong>: 어디가 먼저 사라질지 결정하는 맵</li>
                    <li><strong>Threshold</strong>: 진행도 (0~1)</li>
                    <li><strong>clip()</strong>: 음수면 픽셀 버리기</li>
                    <li><strong>Edge Glow</strong>: 경계 부분 빛나게</li>
                </ul>
            </div>
        </section>

        <!-- 단계별 구현 과정 -->
        <section class="section">
            <h2>단계별 구현 과정</h2>

            <h3>Step 1: 노이즈 시각화</h3>
            <div class="img-container">
                <img src="../../../Screenshots/디졸브/Stemp1.png" alt="Step 1: 노이즈" onerror="this.style.display='none'">
                <p class="img-caption">Step 1: 노이즈 패턴 - 이게 "어디가 먼저 사라질지" 결정하는 맵</p>
            </div>
            <p><strong>목적</strong>: 절차적 노이즈가 어떻게 생겼는지 확인</p>
            <pre><code>// FBM (Fractal Brownian Motion) 노이즈
float noiseValue = fbm(input.TexCoord * NoiseScale);

// 흑백으로 시각화
return float4(noiseValue, noiseValue, noiseValue, 1.0f);</code></pre>
            <p>
                <strong>흰색</strong> = 노이즈 값 높음 (나중에 사라짐)<br>
                <strong>검은색</strong> = 노이즈 값 낮음 (먼저 사라짐)
            </p>

            <h3>Step 2: 기본 clip()</h3>
            <div class="img-container">
                <img src="../../../Screenshots/디졸브/step2.gif" alt="Step 2: clip()" onerror="this.style.display='none'">
                <p class="img-caption">Step 2: clip() 적용 - threshold 올리면 점점 사라짐!</p>
            </div>
            <p><strong>목적</strong>: threshold 기준으로 픽셀 사라지게 하기</p>
            <pre><code>float noiseValue = fbm(input.TexCoord * NoiseScale);

// noise - threshold가 음수면 픽셀 버림
clip(noiseValue - Threshold);

// 남은 픽셀은 회색으로 표시
return float4(0.7f, 0.7f, 0.7f, 1.0f);</code></pre>

            <h3>Step 3: 경계 글로우</h3>
            <div class="img-container">
                <img src="../../../Screenshots/디졸브/step3.gif" alt="Step 3: Edge Glow" onerror="this.style.display='none'">
                <p class="img-caption">Step 3: 경계 글로우 - 사라지는 부분이 불타듯 빛남!</p>
            </div>
            <p><strong>목적</strong>: 사라지는 경계에 빛나는 효과 추가</p>
            <pre><code>float diff = noiseValue - Threshold;
clip(diff);

// diff가 EdgeWidth보다 작으면 경계 영역
if (diff < EdgeWidth)
{
    // 경계에 가까울수록 더 밝게
    float edgeIntensity = 1.0 - (diff / EdgeWidth);
    return EdgeColor * edgeIntensity * 2.0;
}

return float4(0.7f, 0.7f, 0.7f, 1.0f);</code></pre>

            <h3>Step 4: 최종 (조명 + 색상)</h3>
            <div class="img-container">
                <img src="../../../Screenshots/디졸브/step4.gif" alt="Step 4: 최종" onerror="this.style.display='none'">
                <p class="img-caption">Step 4: 완성! - 조명 + 그라디언트 경계 효과</p>
            </div>
            <p><strong>목적</strong>: 실제 게임처럼 완성된 Dissolve 효과</p>
            <pre><code>float diff = noiseValue - Threshold;
clip(diff);

// Lambert 조명
float NdotL = saturate(dot(N, L)) * 0.6 + 0.4;

// 경계 영역
if (diff < EdgeWidth)
{
    float edgeT = diff / EdgeWidth;
    // 두 색상 그라디언트 (안쪽→바깥쪽)
    float4 edgeGlow = lerp(EdgeColor, EdgeColor2, edgeT);
    float intensity = (1.0 - edgeT) * 2.0 + 1.0;
    return edgeGlow * intensity;
}

// 기본 색상 + 조명
return BaseColor * NdotL;</code></pre>

            <div class="highlight-box">
                <h4>단계별 요약</h4>
                <ul>
                    <li><strong>Step 1</strong>: 노이즈 시각화 - "지도" 확인</li>
                    <li><strong>Step 2</strong>: clip() - 기본 사라짐</li>
                    <li><strong>Step 3</strong>: Edge Glow - 경계 빛남</li>
                    <li><strong>Step 4</strong>: 조명 + 색상 - 완성!</li>
                </ul>
            </div>
        </section>

        <!-- 파라미터 -->
        <section class="section">
            <h2>파라미터 조정</h2>

            <table class="param-table">
                <thead>
                    <tr>
                        <th>파라미터</th>
                        <th>설명</th>
                        <th>권장 범위</th>
                        <th>효과</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Threshold</strong></td>
                        <td>진행도</td>
                        <td>0.0 ~ 1.0</td>
                        <td>높을수록 많이 사라짐</td>
                    </tr>
                    <tr>
                        <td><strong>EdgeWidth</strong></td>
                        <td>경계 두께</td>
                        <td>0.02 ~ 0.15</td>
                        <td>높을수록 글로우 넓어짐</td>
                    </tr>
                    <tr>
                        <td><strong>NoiseScale</strong></td>
                        <td>노이즈 밀도</td>
                        <td>3.0 ~ 15.0</td>
                        <td>높을수록 패턴 촘촘</td>
                    </tr>
                    <tr>
                        <td><strong>EdgeColor</strong></td>
                        <td>경계 안쪽 색</td>
                        <td>밝은 주황</td>
                        <td>불꽃 중심 색상</td>
                    </tr>
                    <tr>
                        <td><strong>EdgeColor2</strong></td>
                        <td>경계 바깥 색</td>
                        <td>어두운 빨강</td>
                        <td>불꽃 외곽 색상</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- 학습 포인트 -->
        <section class="section">
            <h2>학습 포인트</h2>

            <div class="highlight-box">
                <h4>핵심 개념</h4>
                <ul>
                    <li><strong>Procedural Noise</strong>: 수학으로 노이즈 생성 (텍스처 없이)</li>
                    <li><strong>FBM (Fractal Brownian Motion)</strong>: 여러 옥타브 노이즈 합성</li>
                    <li><strong>clip()</strong>: 조건에 따라 픽셀 버리기</li>
                    <li><strong>Edge Detection</strong>: 경계 영역 판단하기</li>
                </ul>
            </div>

            <h3>Dissolve가 쓰이는 곳</h3>
            <ul>
                <li><strong>캐릭터 사망</strong>: 재가 되어 흩어지는 연출</li>
                <li><strong>텔레포트</strong>: 나타나고 사라지는 효과</li>
                <li><strong>마법 효과</strong>: 소환/소멸 연출</li>
                <li><strong>UI 전환</strong>: 독특한 화면 전환</li>
            </ul>

            <h3>노이즈 종류</h3>
            <table class="param-table">
                <thead>
                    <tr>
                        <th>노이즈</th>
                        <th>특징</th>
                        <th>용도</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Value Noise</strong></td>
                        <td>격자점 보간</td>
                        <td>부드러운 패턴</td>
                    </tr>
                    <tr>
                        <td><strong>Perlin Noise</strong></td>
                        <td>그라디언트 기반</td>
                        <td>자연스러운 패턴</td>
                    </tr>
                    <tr>
                        <td><strong>FBM</strong></td>
                        <td>여러 주파수 합성</td>
                        <td>복잡한 패턴</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- 실전 활용 -->
        <section class="section">
            <h2>실전 활용 예시</h2>

            <h3>다양한 응용</h3>
            <ul>
                <li><strong>방향성 Dissolve</strong>: 위→아래로 사라지게 (Y좌표 활용)</li>
                <li><strong>거리 기반</strong>: 특정 지점에서부터 사라지게</li>
                <li><strong>다른 노이즈 패턴</strong>: Voronoi, Cellular 노이즈로 다른 느낌</li>
            </ul>

            <h3>조합 가능한 기법</h3>
            <ul>
                <li><strong>+ Particle</strong>: 사라지면서 파티클 생성</li>
                <li><strong>+ Distortion</strong>: 경계 부분 왜곡</li>
                <li><strong>+ Emission</strong>: 경계 발광 효과</li>
            </ul>
        </section>

        <footer class="footer-nav">
            <a href="../02-toon/">← 02. Toon Shading</a>
            <a href="../">쉐이더 테크닉 목록 →</a>
        </footer>
    </div>
</body>
</html>
