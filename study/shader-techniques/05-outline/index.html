<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Outline (외곽선) - MSH Portfolio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #fafafa;
            color: #333;
            line-height: 1.8;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        .nav {
            margin-bottom: 40px;
        }

        .nav a {
            color: #666;
            text-decoration: none;
            font-size: 0.9rem;
            margin-right: 12px;
        }

        .nav a:hover {
            color: #333;
        }

        .header {
            margin-bottom: 50px;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: #111;
        }

        .header-meta {
            display: flex;
            gap: 20px;
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        .header-meta span {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .tag {
            background: #E91E63;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
        }

        .section {
            margin-bottom: 50px;
        }

        .section h2 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #111;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }

        .section h3 {
            font-size: 1.2rem;
            font-weight: 600;
            margin: 30px 0 15px 0;
            color: #333;
        }

        .section p {
            margin-bottom: 16px;
            color: #444;
        }

        .section ul {
            margin-left: 20px;
            margin-bottom: 16px;
        }

        .section li {
            margin-bottom: 8px;
            color: #444;
        }

        pre {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        code {
            background: #f0f0f0;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            color: #E91E63;
        }

        pre code {
            background: none;
            padding: 0;
            color: #d4d4d4;
        }

        .img-container {
            margin: 30px 0;
            text-align: center;
        }

        .img-container img {
            max-width: 100%;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .img-caption {
            margin-top: 12px;
            font-size: 0.85rem;
            color: #666;
        }

        .highlight-box {
            background: #fce4ec;
            border-left: 4px solid #E91E63;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .highlight-box h4 {
            color: #c2185b;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        .formula-box {
            background: white;
            border: 2px solid #E91E63;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            text-align: center;
        }

        .formula {
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 1.2rem;
            color: #c2185b;
            margin: 10px 0;
        }

        .question-box {
            background: #fff3e0;
            border-left: 4px solid #FF9800;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .question-box h4 {
            color: #e65100;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        .ascii-art {
            background: #263238;
            color: #aed581;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.85rem;
            line-height: 1.4;
            overflow-x: auto;
            margin: 20px 0;
        }

        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }

        .param-table th,
        .param-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
        }

        .param-table th {
            background: #E91E63;
            color: white;
            font-weight: 600;
        }

        .param-table tr:last-child td {
            border-bottom: none;
        }

        .footer-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 60px;
            padding-top: 24px;
            border-top: 1px solid #e0e0e0;
        }

        .footer-nav a {
            color: #E91E63;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .footer-nav a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="nav">
            <a href="../../../">&larr; 메인</a>
            <a href="../">&larr; 쉐이더 테크닉 목록</a>
        </nav>

        <header class="header">
            <h1>05. Outline (외곽선)</h1>
            <div class="header-meta">
                <span>작성일: 2025-01-13</span>
                <span>구현 완료</span>
                <span>난이도: ★★☆</span>
            </div>
            <div class="tags">
                <span class="tag">DirectX 11</span>
                <span class="tag">HLSL</span>
                <span class="tag">2-Pass</span>
                <span class="tag">Back-face Culling</span>
            </div>
        </header>

        <!-- 미리보기 이미지 -->
        <div class="img-container">
            <img src="../../../Screenshots/외곽선/step3.gif" alt="Outline 최종 결과" onerror="this.style.display='none'">
            <p class="img-caption">Outline - 만화처럼 검은 테두리가 있는 렌더링</p>
        </div>

        <!-- 개요 -->
        <section class="section">
            <h2>외곽선 하면 뭐가 떠오르나요?</h2>
            <p>
                <strong>젤다: 브레스 오브 더 와일드</strong>, <strong>보더랜드</strong>, <strong>길티기어</strong> 같은 게임 본 적 있죠?
                캐릭터 주변에 <strong>검은 테두리</strong>가 있어서 만화처럼 보이는 스타일이에요.
            </p>

            <div class="question-box">
                <h4>생각해보기: 외곽선은 어떻게 그릴까?</h4>
                <p>3D 모델의 "가장자리"만 검은색으로 그리고 싶은데... 어떻게 하면 될까요?</p>
            </div>

            <p>
                힌트: 같은 모델을 <strong>두 번</strong> 그리는 방법이 있어요.
                두 번째는 <strong>살짝 크게</strong> 그리면 어떨까요?
            </p>
        </section>

        <!-- 핵심 아이디어 -->
        <section class="section">
            <h2>핵심 아이디어: 두 번 그리기</h2>

            <p>외곽선 렌더링의 기본 아이디어는 간단해요:</p>

            <div class="highlight-box">
                <h4>2-Pass 렌더링</h4>
                <ol>
                    <li><strong>Pass 1</strong>: 살짝 큰 모델을 검은색으로 그림</li>
                    <li><strong>Pass 2</strong>: 원본 모델을 정상적으로 그림</li>
                </ol>
                <p>원본이 위에 덮이면서, 큰 모델의 <strong>삐져나온 부분만</strong> 테두리로 보여요!</p>
            </div>

            <div class="question-box">
                <h4>잠깐, 문제가 있어요!</h4>
                <p>큰 모델을 그냥 그리면 원본을 <strong>완전히 덮어버리잖아요</strong>. 어떻게 해야 할까요?</p>
            </div>
        </section>

        <!-- 앞면/뒷면 개념 -->
        <section class="section">
            <h2>앞면과 뒷면 이해하기</h2>

            <p>여기서 중요한 개념이 나와요: <strong>앞면(Front Face)</strong>과 <strong>뒷면(Back Face)</strong>.</p>

            <h3>3D 폴리곤의 양면</h3>
            <p>3D 삼각형은 <strong>종이처럼 양면</strong>이 있어요:</p>
            <ul>
                <li><strong>앞면</strong>: 노말이 향하는 방향 (바깥쪽)</li>
                <li><strong>뒷면</strong>: 노말 반대 방향 (안쪽)</li>
            </ul>

            <h3>일반적인 렌더링</h3>
            <p>보통 게임에서는 <strong>앞면만</strong> 그려요. 뒷면은 어차피 안 보이니까 성능을 위해 <strong>컬링(Culling)</strong> 해버려요.</p>

            <pre><code>// 일반 렌더링
CullMode = CULL_BACK;  // 뒷면 컬링 → 앞면만 그림</code></pre>
        </section>

        <!-- 컵 비유 (핵심!) -->
        <section class="section">
            <h2>컵으로 이해하는 뒷면 렌더링</h2>

            <div class="question-box">
                <h4>큰 모델을 "뒷면만" 그리면 어떻게 될까?</h4>
                <p>이게 외곽선의 핵심 트릭이에요. 컵으로 비유해볼게요.</p>
            </div>

            <h3>종이컵을 옆에서 보면</h3>
            <div class="ascii-art">카메라 →     ┃     ┃
             ┃ 빈  ┃
             ┃ 공간 ┃
             ┗━━━━━┛</div>
            <p>컵의 벽은 <strong>양면</strong>이 있어요:</p>
            <ul>
                <li><strong>바깥면</strong> = 앞면</li>
                <li><strong>안쪽면</strong> = 뒷면</li>
            </ul>

            <h3>바깥면만 그리면? (일반 렌더링)</h3>
            <div class="ascii-art">카메라 →     ┃     ┃  ← 바깥면만 보임
             ┃     ┃
             ┗━━━━━┛</div>

            <h3>안쪽면만 그리면? (뒷면만 렌더링)</h3>
            <div class="ascii-art">카메라 →          ┃  ← 오른쪽 안쪽 벽이 보임!
                  ┃
             ━━━━━┛</div>
            <p>
                왼쪽 벽의 안쪽면은 카메라 <strong>반대 방향</strong>을 향하니까 안 보이고,<br>
                오른쪽 벽의 안쪽면은 카메라 <strong>쪽</strong>을 향하니까 보여요!
            </p>

            <h3>구체도 마찬가지!</h3>
            <p>컵 입구를 막으면 속이 빈 공이에요. 안쪽면(뒷면)만 그리면:</p>
            <div class="ascii-art">카메라 →         │
                 │  ← 오른쪽 안쪽 면만 보임
                 │</div>

            <h3>외곽선 만들기</h3>
            <p>이제 <strong>큰 공</strong>(뒷면만) + <strong>원본 공</strong>(정상)을 겹쳐요:</p>
            <div class="ascii-art">카메라 →     ╭───╮      원본
             │ ● │
             ╰───╯
                 ║      ← 큰 공의 안쪽면 (삐져나온 부분만!)
</div>
            <p>원본이 대부분 가리고, <strong>튀어나온 테두리만</strong> 남아요!</p>

            <div class="highlight-box">
                <h4>핵심 정리</h4>
                <p><strong>뒷면만 그리면</strong> → 원본보다 튀어나온 <strong>"가장자리"만</strong> 보여요!</p>
            </div>
        </section>

        <!-- 모델 확장 -->
        <section class="section">
            <h2>모델을 "크게" 만드는 법</h2>

            <div class="question-box">
                <h4>정점을 어느 방향으로 밀어야 균일하게 부풀릴까?</h4>
                <p>각 정점이 가지고 있는 <strong>방향 정보</strong>가 있어요.</p>
            </div>

            <p>정답은 <strong>노말 방향</strong>이에요!</p>

            <div class="formula-box">
                <p><strong>정점 확장 공식</strong></p>
                <div class="formula">newPosition = position + normal * outlineWidth</div>
            </div>

            <p>모든 정점이 <strong>자기 노말 방향</strong>으로 밀리면, 모델이 균일하게 부풀어요.</p>

            <pre><code>// 버텍스 쉐이더에서
float3 expandedPos = input.Position + input.Normal * OutlineWidth;</code></pre>
        </section>

        <!-- 단계별 구현 -->
        <section class="section">
            <h2>단계별 구현 과정</h2>

            <h3>Step 1: 뒷면만 보기 (컵 안쪽 확인)</h3>
            <div class="img-container">
                <img src="../../../Screenshots/외곽선/STEMP1.png" alt="Step 1: 뒷면" onerror="this.style.display='none'">
                <p class="img-caption">Step 1: 확장된 모델의 뒷면만 렌더링 (빨간색으로 확인)</p>
            </div>
            <p><strong>목적</strong>: "컵 안쪽" 효과가 정말 되는지 확인</p>
            <pre><code>// 래스터라이저 설정
rsDesc.CullMode = D3D11_CULL_FRONT;  // 앞면 컬링 → 뒷면만 그림!

// 픽셀 쉐이더 - 빨간색으로 확인
return float4(1.0, 0.0, 0.0, 1.0);</code></pre>

            <h3>Step 2: 외곽선 + 모델</h3>
            <div class="img-container">
                <img src="../../../Screenshots/외곽선/step2.gif" alt="Step 2: 외곽선" onerror="this.style.display='none'">
                <p class="img-caption">Step 2: 검은 외곽선 + 단색 모델</p>
            </div>
            <p><strong>목적</strong>: 2-Pass로 외곽선 효과 구현</p>
            <pre><code>// ===== Pass 1: 외곽선 =====
// 확장된 모델, 뒷면만, 검은색
m_context->RSSetState(m_rsCullFront);  // 앞면 컬링
m_context->PSSetShader(m_outlinePS);   // 검은색 출력
m_sphere.Draw();

// ===== Pass 2: 모델 =====
// 원본 모델, 앞면만, 정상 색상
m_context->RSSetState(m_rsCullBack);   // 뒷면 컬링 (일반)
m_context->PSSetShader(m_modelPS);     // 모델 색상
m_sphere.Draw();</code></pre>

            <h3>Step 3: 외곽선 + 툰 쉐이딩</h3>
            <div class="img-container">
                <img src="../../../Screenshots/외곽선/step3.gif" alt="Step 3: 최종" onerror="this.style.display='none'">
                <p class="img-caption">Step 3: 외곽선 + 툰 쉐이딩 = 만화 느낌 완성!</p>
            </div>
            <p><strong>목적</strong>: 모델에 툰 쉐이딩을 적용해서 만화 느낌 완성</p>
            <pre><code>// 픽셀 쉐이더 - 3단계 툰 쉐이딩
float NdotL = dot(N, L);

float toon;
if (NdotL > 0.5)
    toon = 1.0;      // 밝음
else if (NdotL > 0.0)
    toon = 0.6;      // 중간
else
    toon = 0.3;      // 어두움

return float4(ModelColor * toon, 1.0);</code></pre>

            <div class="highlight-box">
                <h4>렌더링 순서 요약</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>패스</th>
                            <th>모델</th>
                            <th>컬링</th>
                            <th>색상</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Pass 1</td>
                            <td>확장된 모델</td>
                            <td>앞면 컬링 (뒷면만)</td>
                            <td>검정</td>
                        </tr>
                        <tr>
                            <td>Pass 2</td>
                            <td>원본 모델</td>
                            <td>뒷면 컬링 (앞면만)</td>
                            <td>정상</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- 파라미터 -->
        <section class="section">
            <h2>파라미터 조정</h2>

            <table class="param-table">
                <thead>
                    <tr>
                        <th>파라미터</th>
                        <th>설명</th>
                        <th>권장 범위</th>
                        <th>효과</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>OutlineWidth</strong></td>
                        <td>외곽선 두께</td>
                        <td>0.01 ~ 0.1</td>
                        <td>높을수록 두꺼운 테두리</td>
                    </tr>
                    <tr>
                        <td><strong>OutlineColor</strong></td>
                        <td>외곽선 색상</td>
                        <td>보통 검정</td>
                        <td>다른 색으로 스타일 변경 가능</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- 핵심 정리 -->
        <section class="section">
            <h2>핵심 정리</h2>

            <div class="highlight-box">
                <h4>외곽선 렌더링의 핵심</h4>
                <ul>
                    <li><strong>2-Pass 렌더링</strong>: 같은 모델을 두 번 그림</li>
                    <li><strong>노말 방향 확장</strong>: position + normal * width</li>
                    <li><strong>앞면 컬링</strong>: 확장된 모델의 뒷면만 그림 (컵 안쪽!)</li>
                    <li><strong>순서</strong>: 외곽선(뒷면) → 모델(앞면)</li>
                </ul>
            </div>

            <h3>외곽선이 쓰이는 곳</h3>
            <ul>
                <li><strong>셀 쉐이딩 게임</strong>: 젤다, 보더랜드, 길티기어</li>
                <li><strong>만화/애니메이션 스타일</strong>: 툰 렌더링과 함께 사용</li>
                <li><strong>UI 강조</strong>: 선택된 오브젝트 하이라이트</li>
                <li><strong>스타일라이즈드 렌더링</strong>: 비현실적 아트 스타일</li>
            </ul>
        </section>

        <footer class="footer-nav">
            <a href="../04-hologram/">&larr; 04. Hologram</a>
            <a href="../">쉐이더 테크닉 목록 &rarr;</a>
        </footer>
    </div>
</body>
</html>
