<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>버전 & 번들 시스템 - MSH Portfolio</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #fafafa;
            color: #333;
            line-height: 1.8;
        }
        .container { max-width: 900px; margin: 0 auto; padding: 60px 20px; }
        .back-link {
            display: inline-block;
            margin-bottom: 24px;
            color: #666;
            text-decoration: none;
        }
        .back-link:hover { color: #111; }
        .header { margin-bottom: 40px; }
        .header h1 { font-size: 2rem; font-weight: 700; color: #111; margin-bottom: 8px; }
        .header p { color: #666; }
        .section {
            background: white;
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            border: 1px solid #eee;
        }
        .section h2 {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #111;
            padding-bottom: 12px;
            border-bottom: 2px solid #2196F3;
        }
        .section h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin: 24px 0 12px 0;
            color: #333;
        }
        p {
            margin-bottom: 16px;
            color: #444;
        }
        .question {
            background: #e3f2fd;
            padding: 16px 20px;
            border-radius: 8px;
            margin: 16px 0;
            border-left: 4px solid #2196F3;
        }
        .answer {
            background: #f5f5f5;
            padding: 16px 20px;
            border-radius: 8px;
            margin: 16px 0;
            border-left: 4px solid #4CAF50;
        }
        .flow-diagram {
            background: #f5f5f5;
            border-radius: 8px;
            padding: 24px;
            margin: 20px 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        .highlight {
            background: #fff3e0;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }
        .warning {
            background: #fff3e0;
            padding: 16px 20px;
            border-radius: 8px;
            margin: 16px 0;
            border-left: 4px solid #FF9800;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #e0e0e0;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #f5f5f5;
            font-weight: 600;
        }
        ul, ol {
            margin: 16px 0;
            padding-left: 24px;
        }
        li {
            margin-bottom: 8px;
        }
        .comparison-box {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin: 20px 0;
        }
        .comparison-item {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }
        .comparison-item h4 {
            font-size: 1rem;
            margin-bottom: 12px;
            color: #111;
        }
        .comparison-item.good {
            border-left: 4px solid #4CAF50;
        }
        .comparison-item.bad {
            border-left: 4px solid #f44336;
        }
        @media (max-width: 600px) {
            .comparison-box {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../category-web/" class="back-link">← 웹서버 (Node.js)</a>

        <header class="header">
            <h1>버전 & 번들 시스템</h1>
            <p>게임 클라이언트의 버전 관리와 리소스 업데이트 시스템</p>
        </header>

        <!-- 1. 번들이란? -->
        <section class="section">
            <h2>1. 번들(Bundle)이란?</h2>

            <div class="question">
                <strong>Q:</strong> 게임을 실행하려면 무엇이 필요할까?
            </div>

            <div class="answer">
                <strong>A:</strong> 실행 파일(APK/EXE)과 리소스(이미지, 사운드, 데이터)가 필요하다!
            </div>

            <p>
                <span class="highlight">번들</span>은 게임의 리소스 파일들을 묶은 패키지다.
                실행 파일과 분리해서 별도로 관리한다.
            </p>

            <h3>번들에 포함되는 것들</h3>
            <ul>
                <li>이미지 파일 (캐릭터, 배경, UI 등)</li>
                <li>사운드 파일 (BGM, 효과음)</li>
                <li>데이터 파일 (스테이지 정보, 아이템 테이블 등)</li>
                <li>애니메이션 데이터</li>
            </ul>
        </section>

        <!-- 2. 왜 분리하는가? -->
        <section class="section">
            <h2>2. 왜 실행 파일과 번들을 분리할까?</h2>

            <div class="question">
                <strong>Q:</strong> 모든 리소스를 APK/EXE에 포함하면 안 될까?
            </div>

            <h3>문제점 1: 용량</h3>
            <div class="comparison-box">
                <div class="comparison-item bad">
                    <h4>통합 패키지</h4>
                    <p>이미지 하나 수정해도 → 전체 APK(수 GB) 다시 다운로드</p>
                </div>
                <div class="comparison-item good">
                    <h4>번들 분리</h4>
                    <p>이미지 하나 수정 → 해당 번들만(수십 MB) 다운로드</p>
                </div>
            </div>

            <h3>문제점 2: 스토어 심사</h3>
            <div class="warning">
                <strong>스토어 심사란?</strong><br>
                앱스토어/플레이스토어에 앱을 올리면 직원들이 검토하는 과정.
                악성코드, 정책 위반, 품질 문제 등을 확인한다.
                보통 수 시간 ~ 며칠 소요.
            </div>

            <div class="comparison-box">
                <div class="comparison-item bad">
                    <h4>APK에 모든 것 포함</h4>
                    <p>리소스 수정할 때마다 스토어 심사 대기 (며칠)</p>
                </div>
                <div class="comparison-item good">
                    <h4>번들 분리</h4>
                    <p>리소스는 자체 서버에서 배포 → 즉시 반영 가능</p>
                </div>
            </div>

            <div class="answer">
                <strong>결론:</strong> 번들 분리 = 빠른 업데이트 + 작은 다운로드 용량
            </div>
        </section>

        <!-- 3. Version API -->
        <section class="section">
            <h2>3. Version API의 역할</h2>

            <div class="question">
                <strong>Q:</strong> 클라이언트가 게임을 시작할 때 가장 먼저 해야 할 일은?
            </div>

            <div class="answer">
                <strong>A:</strong> 어떤 서버에 접속할지, 리소스 업데이트가 필요한지 확인해야 한다!
            </div>

            <h3>Version API 요청/응답</h3>
            <div class="flow-diagram">
[클라이언트 → 웹서버]
- OS: 운영체제 (Android/iOS/Windows)
- StoreVer: 스토어 버전 (live/test/review)
- ClientVer: 클라이언트 버전

[웹서버 → 클라이언트]
- server_ip: 접속할 게임 서버 IP
- port: 게임 서버 포트
- bundleVer: 현재 번들 버전
- address: 번들 다운로드 주소
            </div>

            <h3>클라이언트 처리 흐름</h3>
            <div class="flow-diagram">
1. Version API 호출
2. 응답 받음
3. 로컬 번들 버전과 서버 번들 버전 비교
   - 다르면 → address에서 새 번들 다운로드
   - 같으면 → 다운로드 스킵
4. 게임 서버(server_ip:port)에 접속
            </div>
        </section>

        <!-- 4. StoreVer의 역할 -->
        <section class="section">
            <h2>4. 스토어 버전(StoreVer)은 왜 필요할까?</h2>

            <div class="question">
                <strong>Q:</strong> 같은 게임인데 왜 여러 버전의 서버가 필요할까?
            </div>

            <table>
                <tr>
                    <th>StoreVer</th>
                    <th>용도</th>
                    <th>접속 서버</th>
                </tr>
                <tr>
                    <td>live</td>
                    <td>실제 유저용</td>
                    <td>라이브 서버</td>
                </tr>
                <tr>
                    <td>test</td>
                    <td>내부 테스트용</td>
                    <td>테스트 서버</td>
                </tr>
                <tr>
                    <td>review</td>
                    <td>스토어 심사용</td>
                    <td>심사 전용 서버</td>
                </tr>
            </table>

            <div class="answer">
                <strong>핵심:</strong> 같은 게임이지만 용도에 따라 다른 서버로 분기시킨다
            </div>
        </section>

        <!-- 5. 플랫폼별 번들 -->
        <section class="section">
            <h2>5. 플랫폼별로 번들이 다른 이유</h2>

            <div class="question">
                <strong>Q:</strong> Android와 iOS는 같은 번들을 쓰면 안 될까?
            </div>

            <div class="answer">
                <strong>A:</strong> 플랫폼마다 그래픽 API와 텍스처 포맷이 다르다!
            </div>

            <table>
                <tr>
                    <th>플랫폼</th>
                    <th>그래픽 API</th>
                    <th>텍스처 포맷</th>
                </tr>
                <tr>
                    <td>Android</td>
                    <td>OpenGL ES, Vulkan</td>
                    <td>ETC2, ASTC</td>
                </tr>
                <tr>
                    <td>iOS</td>
                    <td>Metal</td>
                    <td>PVRTC, ASTC</td>
                </tr>
                <tr>
                    <td>Windows</td>
                    <td>DirectX</td>
                    <td>DXT, BC7</td>
                </tr>
            </table>

            <p>
                같은 이미지라도 플랫폼에 최적화된 포맷으로 변환해서 번들에 포함한다.
                그래서 OS 정보를 받아서 해당 플랫폼용 번들 경로를 내려준다.
            </p>

            <div class="flow-diagram">
번들 다운로드 경로 예시:
- Android: https://cdn.example.com/bundle/android/v15/
- iOS: https://cdn.example.com/bundle/ios/v15/
- Windows: https://cdn.example.com/bundle/windows/v15/
            </div>
        </section>

        <!-- 6. 전체 흐름 정리 -->
        <section class="section">
            <h2>6. 전체 흐름 정리</h2>

            <div class="flow-diagram">
[게임 시작]
    ↓
[Version API 호출]
클라이언트 → 웹서버: OS, StoreVer, ClientVer 전송
    ↓
[서버 응답]
웹서버 → 클라이언트: server_ip, port, bundleVer, address
    ↓
[번들 버전 비교]
로컬 bundleVer vs 서버 bundleVer
    ↓
[업데이트 필요?]
YES → 번들 다운로드 후 진행
NO  → 바로 게임 서버 접속
    ↓
[게임 서버 접속]
server_ip:port로 TCP 연결
            </div>
        </section>

        <!-- 7. 핵심 정리 -->
        <section class="section">
            <h2>7. 핵심 정리</h2>

            <table>
                <tr>
                    <th>개념</th>
                    <th>설명</th>
                    <th>장점</th>
                </tr>
                <tr>
                    <td>번들 분리</td>
                    <td>리소스를 실행 파일과 분리</td>
                    <td>빠른 업데이트, 작은 패치 용량</td>
                </tr>
                <tr>
                    <td>Version API</td>
                    <td>서버 정보 + 번들 버전 제공</td>
                    <td>한 번의 요청으로 모든 정보 획득</td>
                </tr>
                <tr>
                    <td>StoreVer</td>
                    <td>용도별 서버 분기</td>
                    <td>테스트/심사/라이브 환경 분리</td>
                </tr>
                <tr>
                    <td>bundleVer</td>
                    <td>리소스 버전 관리</td>
                    <td>필요할 때만 다운로드</td>
                </tr>
                <tr>
                    <td>플랫폼별 번들</td>
                    <td>OS별 최적화된 리소스</td>
                    <td>성능 최적화</td>
                </tr>
            </table>
        </section>
    </div>
</body>
</html>
