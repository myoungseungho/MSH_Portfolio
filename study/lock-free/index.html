<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lock-Free ìë£Œêµ¬ì¡° í•™ìŠµ - MSH Portfolio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #fafafa;
            color: #333;
            line-height: 1.8;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        .nav {
            margin-bottom: 40px;
        }

        .nav a {
            color: #666;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .nav a:hover {
            color: #333;
        }

        .header {
            margin-bottom: 50px;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: #111;
        }

        .header-meta {
            display: flex;
            gap: 20px;
            color: #666;
            font-size: 0.9rem;
        }

        .section {
            margin-bottom: 50px;
        }

        .section h2 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #111;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }

        .section h3 {
            font-size: 1.2rem;
            font-weight: 600;
            margin: 30px 0 15px 0;
            color: #333;
        }

        .section p {
            margin-bottom: 16px;
            color: #444;
        }

        pre {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        code {
            background: #f0f0f0;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
        }

        pre code {
            background: none;
            padding: 0;
        }

        .comment { color: #6a9955; }
        .keyword { color: #569cd6; }
        .type { color: #4ec9b0; }
        .string { color: #ce9178; }
        .number { color: #b5cea8; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }

        th, td {
            padding: 14px 16px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            background: #f8f8f8;
            font-weight: 600;
            color: #333;
        }

        tr:last-child td {
            border-bottom: none;
        }

        .diagram {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 24px;
            margin: 20px 0;
            font-family: 'Consolas', monospace;
            white-space: pre;
            overflow-x: auto;
            line-height: 1.4;
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 20px 0;
        }

        .tag {
            background: #e8f4fd;
            color: #1976d2;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85rem;
        }

        .insight-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 20px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }

        .insight-box h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .insight-box.blue {
            background: #e3f2fd;
            border-left-color: #2196f3;
        }

        .insight-box.blue h4 {
            color: #1565c0;
        }

        .insight-box.red {
            background: #ffebee;
            border-left-color: #f44336;
        }

        .insight-box.red h4 {
            color: #c62828;
        }

        .insight-box.green {
            background: #e8f5e9;
            border-left-color: #4caf50;
        }

        .insight-box.green h4 {
            color: #2e7d32;
        }

        ul, ol {
            margin: 16px 0;
            padding-left: 24px;
        }

        li {
            margin-bottom: 8px;
        }

        .footer {
            text-align: center;
            padding: 40px 0;
            color: #999;
            font-size: 0.9rem;
            border-top: 1px solid #e0e0e0;
            margin-top: 60px;
        }

        .compare-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        @media (max-width: 600px) {
            .compare-grid {
                grid-template-columns: 1fr;
            }
        }

        .compare-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            border: 1px solid #eee;
        }

        .compare-card h4 {
            font-size: 1.1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .compare-card.slow h4 {
            color: #d32f2f;
        }

        .compare-card.fast h4 {
            color: #388e3c;
        }

        /* í† ê¸€ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .toggle-section {
            margin: 16px 0;
        }

        .toggle-section summary {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            cursor: pointer;
            font-weight: 500;
            color: #1e40af;
            background: #dbeafe;
            border-radius: 25px;
            list-style: none;
            transition: all 0.2s;
        }

        .toggle-section summary::-webkit-details-marker {
            display: none;
        }

        .toggle-section summary::before {
            content: 'ğŸ’¡';
        }

        .toggle-section summary:hover {
            background: #bfdbfe;
            transform: translateY(-2px);
        }

        .toggle-content {
            margin-top: 12px;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid #e5e7eb;
            position: relative;
        }

        .toggle-content::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 30px;
            width: 16px;
            height: 16px;
            background: white;
            border-left: 1px solid #e5e7eb;
            border-top: 1px solid #e5e7eb;
            transform: rotate(45deg);
        }

        .toggle-content h4 {
            color: #333;
            margin: 20px 0 12px 0;
            font-size: 1.05rem;
        }

        .toggle-content h4:first-child {
            margin-top: 0;
        }

        .step-box {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 12px;
            padding: 24px;
            margin: 20px 0;
        }

        .step-box h4 {
            color: #495057;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="nav">
            <a href="../../">&larr; ëŒì•„ê°€ê¸°</a>
        </nav>

        <header class="header">
            <h1>Lock-Free ìë£Œêµ¬ì¡° í•™ìŠµ</h1>
            <div class="header-meta">
                <span>C++ / Windows</span>
                <span>ë©€í‹°ìŠ¤ë ˆë“œ ë™ê¸°í™”</span>
            </div>
            <div class="tags">
                <span class="tag">Lock-Free</span>
                <span class="tag">CAS</span>
                <span class="tag">Atomic</span>
                <span class="tag">Race Condition</span>
                <span class="tag">ê²Œì„ ì„œë²„</span>
            </div>
        </header>

        <!-- 1. Race Condition -->
        <section class="section">
            <h2>1. ì‹œì‘ì : Race Condition ë¬¸ì œ</h2>

            <h3>counter++ ëŠ” ì™œ ìœ„í—˜í•œê°€?</h3>
            <p>
                ê°„ë‹¨í•´ ë³´ì´ëŠ” <code>counter++</code> í•œ ì¤„ì´ ì‚¬ì‹¤ì€ CPU ë‚´ë¶€ì—ì„œ 3ë‹¨ê³„ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.
            </p>

            <div class="diagram">counter++;  // ì´ê±° í•œ ì¤„ì´ ì‚¬ì‹¤ì€ 3ë‹¨ê³„

CPU ë‚´ë¶€ ë™ì‘:
1. LOAD:  ë©”ëª¨ë¦¬ì—ì„œ counter ê°’ì„ ë ˆì§€ìŠ¤í„°ë¡œ ì½ê¸°
2. ADD:   ë ˆì§€ìŠ¤í„°ì—ì„œ +1
3. STORE: ë ˆì§€ìŠ¤í„° ê°’ì„ ë©”ëª¨ë¦¬ì— ì“°ê¸°</div>

            <h3>ë¬¸ì œ ìƒí™©</h3>
            <p>ë‘ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— <code>counter++</code>ë¥¼ ì‹¤í–‰í•˜ë©´:</p>

            <div class="diagram">counter = 0 ìƒíƒœì—ì„œ ì‹œì‘

ìŠ¤ë ˆë“œA: LOAD (0 ì½ìŒ)
ìŠ¤ë ˆë“œB: LOAD (0 ì½ìŒ)  â† Aê°€ ì“°ê¸° ì „ì— ì½ì–´ë²„ë¦¼!
ìŠ¤ë ˆë“œA: ADD (0+1=1)
ìŠ¤ë ˆë“œA: STORE (1 ì €ì¥)
ìŠ¤ë ˆë“œB: ADD (0+1=1)
ìŠ¤ë ˆë“œB: STORE (1 ì €ì¥)  â† 1ì„ ë®ì–´ì”€!

ê²°ê³¼: counter = 1 (2ê°€ ë˜ì–´ì•¼ í•˜ëŠ”ë°!)</div>

            <div class="insight-box red">
                <h4>Race Condition</h4>
                <p>
                    ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ <strong>ë™ì‹œì— ê°™ì€ ë°ì´í„°ì— ì ‘ê·¼</strong>í•  ë•Œ,
                    ì‹¤í–‰ ìˆœì„œì— ë”°ë¼ ê²°ê³¼ê°€ ë‹¬ë¼ì§€ëŠ” ë¬¸ì œì…ë‹ˆë‹¤.
                    ë°ì´í„° ì†ì‹¤ì´ ë°œìƒí•˜ì§€ë§Œ, í¬ë˜ì‹œê°€ ë‚˜ì§€ ì•Šì•„ì„œ ë°œê²¬í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤.
                </p>
            </div>
        </section>

        <!-- 2. Mutex -->
        <section class="section">
            <h2>2. í•´ê²°ì±… 1: ë®¤í…ìŠ¤ (Mutex)</h2>

<pre><code><span class="keyword">mutex</span>.lock();
counter++;
<span class="keyword">mutex</span>.unlock();</code></pre>

            <p>
                <code>lock()</code> í•˜ë©´ ë‹¤ë¥¸ ìŠ¤ë ˆë“œëŠ” ê·¸ êµ¬ì—­ì— ëª» ë“¤ì–´ì˜¤ê³ ,
                <code>unlock()</code> í•˜ë©´ ë‹¤ìŒ ìŠ¤ë ˆë“œê°€ ë“¤ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>

            <h3>ë¬¸ì œì  1: ë°ë“œë½ (Deadlock)</h3>
            <div class="diagram">ìŠ¤ë ˆë“œ1: ë®¤í…ìŠ¤A ì ê¸ˆ â†’ ë®¤í…ìŠ¤B ì ê·¸ë ¤ í•¨ (BëŠ” ìŠ¤ë ˆë“œ2ê°€ ì¡ê³  ìˆìŒ) â†’ ëŒ€ê¸°
ìŠ¤ë ˆë“œ2: ë®¤í…ìŠ¤B ì ê¸ˆ â†’ ë®¤í…ìŠ¤A ì ê·¸ë ¤ í•¨ (AëŠ” ìŠ¤ë ˆë“œ1ì´ ì¡ê³  ìˆìŒ) â†’ ëŒ€ê¸°

â†’ ë‘˜ ë‹¤ ì˜ì›íˆ ëŒ€ê¸° = ë°ë“œë½!</div>

            

            <h3>ë¬¸ì œì  2: ì„±ëŠ¥</h3>
            <p>
                ìŠ¤ë ˆë“œê°€ <code>lock()</code>ì—ì„œ ë§‰íˆë©´ OSê°€ ìŠ¤ë ˆë“œë¥¼ "ì¬ì›ë‹ˆë‹¤".
                ê¹¨ì–´ë‚  ë•Œ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ì´ ë°œìƒí•˜ê³ , ì´ëŠ” ìˆ˜ì²œ~ìˆ˜ë§Œ CPU ì‚¬ì´í´ì„ ì†Œëª¨í•©ë‹ˆë‹¤.
            </p>
        </section>

        <!-- 3. Atomic -->
        <section class="section">
            <h2>3. í•´ê²°ì±… 2: Atomic ì—°ì‚°</h2>

<pre><code><span class="comment">// Windows API</span>
InterlockedIncrement(&counter);

<span class="comment">// C++11 í‘œì¤€</span>
std::<span class="type">atomic</span>&lt;<span class="keyword">int</span>&gt; counter;
counter++;</code></pre>

            <h3>ë®¤í…ìŠ¤ vs Atomic ì°¨ì´</h3>
            <table>
                <tr>
                    <th></th>
                    <th>ë®¤í…ìŠ¤</th>
                    <th>Atomic</th>
                </tr>
                <tr>
                    <td>ëŒ€ê¸° ë°©ì‹</td>
                    <td>OSê°€ ìŠ¤ë ˆë“œë¥¼ ì¬ì›€ (sleep)</td>
                    <td>CPUê°€ ì¦‰ì‹œ ì¬ì‹œë„ (spin)</td>
                </tr>
                <tr>
                    <td>ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­</td>
                    <td>ë°œìƒ</td>
                    <td>ì—†ìŒ</td>
                </tr>
                <tr>
                    <td>ë¹„ìš©</td>
                    <td>ìˆ˜ì²œ~ìˆ˜ë§Œ ì‚¬ì´í´</td>
                    <td>ìˆ˜ì‹­ ì‚¬ì´í´</td>
                </tr>
                <tr>
                    <td>ë°ë“œë½</td>
                    <td>ê°€ëŠ¥</td>
                    <td>ë¶ˆê°€ëŠ¥</td>
                </tr>
                <tr>
                    <td>ë²”ìœ„</td>
                    <td>ì—¬ëŸ¬ ì¤„ ë³´í˜¸ ê°€ëŠ¥</td>
                    <td>ë³€ìˆ˜ 1ê°œë§Œ</td>
                </tr>
            </table>

            <details class="toggle-section">
                <summary>ë¹„ìœ ë¡œ ì´í•´í•˜ê¸°</summary>
                <div class="toggle-content">
                    <div class="diagram">ë®¤í…ìŠ¤ = ì€í–‰ ë²ˆí˜¸í‘œ ë½‘ê³  ì˜ìì— ì•‰ì•„ì„œ 10ë¶„ ê¸°ë‹¤ë¦¼
         (ìŠ¤ë ˆë“œê°€ ì ë“¤ê³ , ê¹¨ì–´ë‚˜ëŠ” ë° ë¹„ìš© ë°œìƒ)

Atomic = í¸ì˜ì  ê³„ì‚°ëŒ€ì—ì„œ ì•ì‚¬ëŒì´ ì¹´ë“œ ì°ëŠ” 0.5ì´ˆ ê¸°ë‹¤ë¦¼
         (ìë¦¬ì—ì„œ ì„œì„œ ê¸°ë‹¤ë¦¼, ë°”ë¡œ ë‚´ ì°¨ë¡€)</div>
                </div>
            </details>

            <div class="insight-box">
                <h4>Atomicì´ í•­ìƒ ì¢‹ì€ ê±´ ì•„ë‹˜</h4>
                <p>
                    Atomicì€ "ê¹¨ì–´ì„œ ëŒ€ê¸°" = CPUë¥¼ ê³„ì† ì‚¬ìš©í•©ë‹ˆë‹¤.
                    ëŒ€ê¸° ì‹œê°„ì´ ê¸¸ë©´ CPU ë‚­ë¹„ê°€ ë©ë‹ˆë‹¤.
                </p>
                <ul>
                    <li><strong>ì§§ì€ ì‘ì—…:</strong> Atomicì´ ìœ ë¦¬</li>
                    <li><strong>ê¸´ ì‘ì—… (I/O í¬í•¨):</strong> ë®¤í…ìŠ¤ê°€ ìœ ë¦¬</li>
                </ul>
            </div>
        </section>

        <!-- 4. Atomicì˜ í•œê³„ -->
        <section class="section">
            <h2>4. Atomicì˜ í•œê³„</h2>

            <p>Atomicì€ <strong>ë³€ìˆ˜ 1ê°œ</strong>ë§Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<pre><code><span class="comment">// Atomic: ë³€ìˆ˜ 1ê°œë§Œ ì•ˆì „</span>
InterlockedIncrement(&a);  <span class="comment">// aë§Œ ì•ˆì „</span>
InterlockedIncrement(&b);  <span class="comment">// bë§Œ ì•ˆì „</span>
<span class="comment">// aì™€ bë¥¼ "í•¨ê»˜" ì•ˆì „í•˜ê²Œ? ëª»í•¨</span>

<span class="comment">// ë®¤í…ìŠ¤: ì—¬ëŸ¬ ë³€ìˆ˜ ê°€ëŠ¥</span>
<span class="keyword">mutex</span>.lock();
a = <span class="number">1</span>;
b = <span class="number">2</span>;
c = a + b;
<span class="keyword">mutex</span>.unlock();</code></pre>

            <div class="insight-box blue">
                <h4>Lock-Freeê°€ í•´ê²°í•˜ë ¤ëŠ” ë¬¸ì œ</h4>
                <p>
                    Atomicì²˜ëŸ¼ ë¹ ë¥´ê³  ë°ë“œë½ ì—†ìœ¼ë©´ì„œ,<br>
                    ì—¬ëŸ¬ ë³€ìˆ˜ë„ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•˜ê³  ì‹¶ë‹¤!
                </p>
            </div>
        </section>

        <!-- 5. CAS -->
        <section class="section">
            <h2>5. CAS (Compare-And-Swap)</h2>

            <p>Lock-Freeì˜ <strong>í•µì‹¬ ì—°ì‚°</strong>ì…ë‹ˆë‹¤.</p>

<pre><code>CAS(ë³€ìˆ˜, ì˜ˆìƒê°’, ìƒˆê°’)

<span class="comment">// í’€ì–´ì“°ë©´:</span>
<span class="keyword">if</span> (ë³€ìˆ˜ == ì˜ˆìƒê°’) {
    ë³€ìˆ˜ = ìƒˆê°’;
    <span class="keyword">return</span> <span class="keyword">true</span>;   <span class="comment">// ì„±ê³µ!</span>
} <span class="keyword">else</span> {
    <span class="keyword">return</span> <span class="keyword">false</span>;  <span class="comment">// ì‹¤íŒ¨ (ëˆ„ê°€ ë¨¼ì € ë°”ê¿¨ë„¤)</span>
}</code></pre>

            <p>
                ì¤‘ìš”í•œ ì : ì´ ì „ì²´ê°€ <strong>CPU ëª…ë ¹ì–´ 1ê°œ</strong>ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤. ì¤‘ê°„ì— ëŠê¸°ì§€ ì•ŠìŠµë‹ˆë‹¤.
            </p>

            <h3>CAS ë™ì‘ ì˜ˆì‹œ</h3>
            <div class="diagram">counter = 10 ìƒíƒœ

ìŠ¤ë ˆë“œA: CAS(&counter, 10, 11)
         "counterê°€ 10ì´ë©´ 11ë¡œ ë°”ê¿”ì¤˜"
         â†’ counterê°€ 10ì´ë„¤? â†’ 11ë¡œ ë°”ê¿ˆ â†’ ì„±ê³µ!

ìŠ¤ë ˆë“œB: CAS(&counter, 10, 11)  (ê±°ì˜ ë™ì‹œì—)
         "counterê°€ 10ì´ë©´ 11ë¡œ ë°”ê¿”ì¤˜"
         â†’ counterê°€ 11ì´ë„¤? (Aê°€ ë°”ê¿”ë²„ë¦¼) â†’ ì‹¤íŒ¨!
         â†’ ë‹¤ì‹œ ì‹œë„...</div>

            <div class="insight-box green">
                <h4>CASì˜ í•µì‹¬ ì•„ì´ë””ì–´</h4>
                <p>
                    "ë‚´ê°€ ì½ì€ ê°’ì´ ì•„ì§ ê·¸ëŒ€ë¡œì•¼?" í™•ì¸í•˜ê³  ë°”ê¿ˆ.<br>
                    ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ë¨¼ì € ë°”ê¿¨ìœ¼ë©´ ì‹¤íŒ¨ â†’ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œë„.
                </p>
            </div>
        </section>

        <!-- 6. Lock-Free ì˜ˆì‹œ -->
        <section class="section">
            <h2>6. Lock-Free ë§í¬ë“œ ë¦¬ìŠ¤íŠ¸ ì˜ˆì‹œ</h2>

            <h3>ìƒí™© ì„¤ì •</h3>
            <p>ê²Œì„ ì„œë²„ì—ì„œ "ì ‘ì†í•œ ìœ ì € ëª©ë¡"ì„ ë§í¬ë“œ ë¦¬ìŠ¤íŠ¸ë¡œ ê´€ë¦¬í•œë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.</p>

            <div class="diagram">í˜„ì¬ ì ‘ì† ìœ ì €: ì² ìˆ˜ â†’ ì˜í¬ (2ëª…)

HEAD â†’ [ì² ìˆ˜] â†’ [ì˜í¬] â†’ NULL</div>

            <h3>ë¬¸ì œ: ë™ì‹œì— 2ëª…ì´ ì ‘ì†</h3>
            <div class="diagram">ìŠ¤ë ˆë“œ1: "ë¯¼ìˆ˜" ì ‘ì† ì²˜ë¦¬
ìŠ¤ë ˆë“œ2: "ì§€ìˆ˜" ì ‘ì† ì²˜ë¦¬
ë‘˜ ë‹¤ ë§¨ ì•ì— ì¶”ê°€í•˜ë ¤ê³  í•¨</div>

            <h3>ìœ„í—˜í•œ ìƒí™© (ë½ ì—†ì´ ê·¸ëƒ¥ í•˜ë©´)</h3>
            <div class="diagram">ìŠ¤ë ˆë“œ1: "ë¯¼ìˆ˜ ë‹¤ìŒì€ ì² ìˆ˜ì•¼" (ë¯¼ìˆ˜â†’ì² ìˆ˜ ì—°ê²°)
ìŠ¤ë ˆë“œ2: "ì§€ìˆ˜ ë‹¤ìŒì€ ì² ìˆ˜ì•¼" (ì§€ìˆ˜â†’ì² ìˆ˜ ì—°ê²°)  â† ë™ì‹œì—!

ìŠ¤ë ˆë“œ1: "HEADëŠ” ì´ì œ ë¯¼ìˆ˜ì•¼"
ìŠ¤ë ˆë“œ2: "HEADëŠ” ì´ì œ ì§€ìˆ˜ì•¼"  â† ë¯¼ìˆ˜ ë®ì–´ì”€!

ê²°ê³¼: HEAD â†’ [ì§€ìˆ˜] â†’ [ì² ìˆ˜] â†’ [ì˜í¬]
      [ë¯¼ìˆ˜] â†’ [ì² ìˆ˜] â†’ ...  â† ë¯¼ìˆ˜ê°€ ë¦¬ìŠ¤íŠ¸ì—ì„œ ì‚¬ë¼ì§!</div>

            <h3>CASë¡œ í•´ê²°</h3>
            <div class="diagram">ìŠ¤ë ˆë“œ1: "HEADê°€ ì•„ì§ ì² ìˆ˜ ë§ì•„?" â†’ ë§ë„¤ â†’ "ë¯¼ìˆ˜ë¡œ ë°”ê¿€ê²Œ" â†’ ì„±ê³µ!
ìŠ¤ë ˆë“œ2: "HEADê°€ ì•„ì§ ì² ìˆ˜ ë§ì•„?" â†’ ì•„ë‹ˆë„¤ ë¯¼ìˆ˜ì–ì•„ â†’ ì‹¤íŒ¨!
         â†’ ë‹¤ì‹œ: "ë¯¼ìˆ˜ ë§ì•„?" â†’ ë§ë„¤ â†’ "ì§€ìˆ˜ë¡œ ë°”ê¿€ê²Œ" â†’ ì„±ê³µ!

ê²°ê³¼: HEAD â†’ [ì§€ìˆ˜] â†’ [ë¯¼ìˆ˜] â†’ [ì² ìˆ˜] â†’ [ì˜í¬]
      4ëª… ë‹¤ ìˆìŒ!</div>

            <h3>ì½”ë“œë¡œ ë³´ë©´</h3>
<pre><code><span class="keyword">void</span> Push(Node* newNode) {
    <span class="keyword">do</span> {
        Node* oldHead = HEAD;        <span class="comment">// 1. í˜„ì¬ HEAD ê¸°ì–µ</span>
        newNode->next = oldHead;     <span class="comment">// 2. ìƒˆ ë…¸ë“œê°€ oldHeadë¥¼ ê°€ë¦¬í‚´</span>
    } <span class="keyword">while</span> (!CAS(&HEAD, oldHead, newNode));  <span class="comment">// 3. í™•ì¸ í›„ ë°”ê¾¸ê¸°</span>
}</code></pre>

            <div class="insight-box blue">
                <h4>í•µì‹¬ ì•„ì´ë””ì–´</h4>
                <p>
                    2ê°œ ë³€ìˆ˜ë¥¼ ë™ì‹œì— ëª» ë°”ê¾¸ë©´, <strong>ë§ˆì§€ë§‰ 1ê°œ(HEAD)ë§Œ CASë¡œ í™•ì¸</strong>.<br>
                    ì„±ê³µí•˜ë©´ ì—°ê²° ì™„ë£Œ, ì‹¤íŒ¨í•˜ë©´ ëˆ„ê°€ ê±´ë“œë ¸ìœ¼ë‹ˆ ì²˜ìŒë¶€í„° ë‹¤ì‹œ.
                </p>
            </div>
        </section>

        <!-- 7. ì •ë¦¬ -->
        <section class="section">
            <h2>7. ì •ë¦¬: ì–¸ì œ ë­˜ ì“¸ê¹Œ?</h2>

            <table>
                <tr>
                    <th>ìƒí™©</th>
                    <th>ì¶”ì²œ</th>
                </tr>
                <tr>
                    <td>ë‹¨ìˆœ ì¹´ìš´í„° ì¦ê°€</td>
                    <td>Atomic (InterlockedIncrement)</td>
                </tr>
                <tr>
                    <td>ì§§ì€ ì‘ì—…, ë³€ìˆ˜ ì—¬ëŸ¬ ê°œ</td>
                    <td>Lock-Free (CAS ê¸°ë°˜)</td>
                </tr>
                <tr>
                    <td>ê¸´ ì‘ì—…, I/O í¬í•¨</td>
                    <td>ë®¤í…ìŠ¤</td>
                </tr>
                <tr>
                    <td>ë³µì¡í•œ ë¡œì§, ì—¬ëŸ¬ ìì›</td>
                    <td>ë®¤í…ìŠ¤ (ë°ë“œë½ ì£¼ì˜)</td>
                </tr>
                <tr>
                    <td>ê²½ìŸì´ ì‹¬í•œ ìƒí™©</td>
                    <td>ë®¤í…ìŠ¤ (Lock-FreeëŠ” CPU ë‚­ë¹„)</td>
                </tr>
            </table>

            <div class="insight-box">
                <h4>ê²½ìŸì´ ì‹¬í•˜ë©´?</h4>
                <p>
                    100ê°œ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— CASë¥¼ ì‹œë„í•˜ë©´, 1ê°œë§Œ ì„±ê³µí•˜ê³  99ê°œëŠ” ì‹¤íŒ¨ â†’ ì¬ì‹œë„.
                    ì´ëŸ¬ë©´ CPUë§Œ ë‚­ë¹„ë©ë‹ˆë‹¤. ì´ëŸ° ê²½ìš°ì—” ë®¤í…ìŠ¤ê°€ ë” íš¨ìœ¨ì ì…ë‹ˆë‹¤.
                </p>
            </div>
        </section>

        <!-- 8. ì¶”ê°€ í•™ìŠµ -->
        <section class="section">
            <h2>8. ì¶”ê°€ í•™ìŠµ í‚¤ì›Œë“œ</h2>

            <h3>ABA ë¬¸ì œ</h3>
            <p>CASì˜ í•¨ì •: ê°’ì´ Aâ†’Bâ†’Aë¡œ ë°”ë€Œë©´ ë³€í™”ë¥¼ ê°ì§€ ëª»í•¨</p>

            <details class="toggle-section">
                <summary>ABA ë¬¸ì œì™€ í•´ê²° ë°©ë²• (í´ë¦­)</summary>
                <div class="toggle-content">
                    <h4>ë¬¸ì œ ìƒí™©</h4>
                    <div class="diagram">ìŠ¤ë ˆë“œ1: old = A ì½ìŒ â†’ (ì ì‹œ ë©ˆì¶¤)
ìŠ¤ë ˆë“œ2: A â†’ Bë¡œ ë³€ê²½
ìŠ¤ë ˆë“œ3: B â†’ Aë¡œ ë³€ê²½ (ë‹¤ì‹œ Aê°€ ë¨!)
ìŠ¤ë ˆë“œ1: CAS(&ë³€ìˆ˜, new, A) â†’ "A ë§ë„¤!" â†’ ì„±ê³µ!
         â†’ ê·¼ë° ì‚¬ì‹¤ ì¤‘ê°„ì— ë°”ë€Œì—ˆë˜ ê±°ì„!</div>

                    <h4>í•´ê²°: ê°’ + ë²„ì „ ë²ˆí˜¸</h4>
                    <p>ê°’ë§Œ ë¹„êµí•˜ì§€ ë§ê³ , <strong>ë²„ì „ ë²ˆí˜¸</strong>ë¥¼ í•¨ê»˜ ë¶™ì—¬ì„œ ë¹„êµí•©ë‹ˆë‹¤.</p>
<pre><code><span class="comment">// ê°’ë§Œ ì €ì¥í•˜ì§€ ë§ê³ </span>
<span class="keyword">int</span> value;

<span class="comment">// ê°’ + ë²„ì „ì„ í•¨ê»˜ ì €ì¥</span>
<span class="keyword">struct</span> Tagged {
    <span class="keyword">int</span> value;
    <span class="keyword">int</span> version;  <span class="comment">// ë°”ê¿€ ë•Œë§ˆë‹¤ +1</span>
};</code></pre>

                    <h4>ë™ì‘ ì˜ˆì‹œ</h4>
                    <div class="diagram">ì´ˆê¸°: {value=A, version=0}

ìŠ¤ë ˆë“œ1: old = {A, 0} ì½ìŒ â†’ (ì ì‹œ ë©ˆì¶¤)
ìŠ¤ë ˆë“œ2: {A, 0} â†’ {B, 1}
ìŠ¤ë ˆë“œ3: {B, 1} â†’ {A, 2}  â† ê°’ì€ Aì§€ë§Œ ë²„ì „ì´ ë‹¤ë¦„!
ìŠ¤ë ˆë“œ1: CASë¡œ {A, 0} í™•ì¸ â†’ í˜„ì¬ëŠ” {A, 2} â†’ ë²„ì „ ë‹¤ë¦„ â†’ ì‹¤íŒ¨!
         â†’ ì¬ì‹œë„</div>

                    <div class="insight-box green">
                        <h4>í•µì‹¬</h4>
                        <p>
                            ê°’ì´ ê°™ì•„ë„ ë²„ì „ì´ ë‹¤ë¥´ë©´ "ëˆ„ê°€ ê±´ë“œë ¸ë‹¤"ëŠ” ê±¸ ì•Œ ìˆ˜ ìˆìŒ.<br>
                            Windowsì—ì„œëŠ” <code>InterlockedCompareExchange64</code>ë¡œ ê°’(32bit) + ë²„ì „(32bit)ì„ ë™ì‹œì— ë¹„êµí•©ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>
            </details>

            <h3>ê¸°íƒ€ í‚¤ì›Œë“œ</h3>
            <ul>
                <li><strong>Lock-Free Queue, Stack:</strong> ì‹¤ì œ ìë£Œêµ¬ì¡° êµ¬í˜„</li>
                <li><strong>Memory Ordering:</strong> CPUê°€ ëª…ë ¹ì–´ ìˆœì„œë¥¼ ë°”ê¾¸ëŠ” ë¬¸ì œ</li>
                <li><strong>std::atomicì˜ memory_order:</strong> C++ í‘œì¤€ ë©”ëª¨ë¦¬ ìˆœì„œ ì˜µì…˜</li>
            </ul>
        </section>

        <footer class="footer">
            <p>MSH Portfolio - Game Server Developer</p>
        </footer>
    </div>
</body>
</html>
